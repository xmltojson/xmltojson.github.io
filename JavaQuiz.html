<!DOCTYPE html>
<!-- MIT License
Copyright (c) 2025-2026 Valentyn Kolesnikov <0009-0003-9608-3364@orcid.org>
-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Java Quiz">
    <title>Java Quiz</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f89820 0%, #5382a1 50%, #0d1117 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .quiz-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }

        .quiz-header {
            background: linear-gradient(135deg, #f89820, #5382a1);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .quiz-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .quiz-header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .progress-container {
            background: #f0f0f0;
            padding: 15px 30px;
            border-bottom: 1px solid #ddd;
        }

        .progress-bar {
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f89820, #5382a1);
            border-radius: 5px;
            transition: width 0.3s ease;
        }

        .progress-text {
            margin-top: 10px;
            font-size: 0.9rem;
            color: #666;
            display: flex;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 10px;
        }

        .timer-container {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: bold;
        }

        .timer-icon {
            font-size: 1.2rem;
        }

        .timer {
            font-size: 1.1rem;
            color: #f89820;
            font-family: 'Courier New', monospace;
        }

        .timer.warning {
            color: #ff6b00;
            animation: pulse 1s infinite;
        }

        .timer.danger {
            color: #dc3545;
            animation: pulse 0.5s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .quiz-content {
            padding: 30px;
        }

        .question-card {
            display: none;
        }

        .question-card.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .question-number {
            color: #f89820;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .question-category {
            background: linear-gradient(135deg, #f89820, #5382a1);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
        }

        .question-difficulty {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .question-difficulty.easy {
            background: #d4edda;
            color: #155724;
        }

        .question-difficulty.medium {
            background: #fff3cd;
            color: #856404;
        }

        .question-difficulty.hard {
            background: #f8d7da;
            color: #721c24;
        }

        .question-text {
            font-size: 1.3rem;
            color: #333;
            margin-bottom: 25px;
            line-height: 1.5;
        }

        .time-up-message {
            background: linear-gradient(135deg, #dc3545, #c82333);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: none;
            align-items: center;
            gap: 10px;
            animation: fadeIn 0.3s ease;
        }

        .time-up-message.show {
            display: flex;
        }

        .time-up-message .time-icon {
            font-size: 1.5rem;
        }

        .time-up-message .time-text {
            flex: 1;
        }

        .time-up-message .time-text strong {
            display: block;
            font-size: 1.1rem;
            margin-bottom: 2px;
        }

        .time-up-message .time-text span {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .option {
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            background: white;
            min-height: 60px;
        }

        .option:hover:not(.disabled) {
            border-color: #f89820;
            background: #fff8f0;
            transform: translateX(5px);
        }

        .option.selected {
            border-color: #f89820;
            background: #fff5e6;
        }

        .option.correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .option.correct .option-text {
            color: #155724 !important;
        }

        .option.incorrect {
            border-color: #dc3545;
            background: #f8d7da;
        }

        .option.incorrect .option-text {
            color: #721c24 !important;
        }

        .option.disabled {
            pointer-events: none;
            opacity: 0.95;
        }

        .option.show-correct {
            border-color: #28a745;
            background: #d4edda;
        }

        .option.show-correct .option-text {
            color: #155724 !important;
        }

        .option-letter {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            min-width: 40px;
            border-radius: 50%;
            background: #f89820;
            color: white;
            font-weight: bold;
            margin-right: 15px;
            flex-shrink: 0;
            font-size: 1rem;
        }

        .option.correct .option-letter {
            background: #28a745;
        }

        .option.incorrect .option-letter {
            background: #dc3545;
        }

        .option.show-correct .option-letter {
            background: #28a745;
        }

        .option-text {
            flex: 1;
            color: #1a1a1a;
            font-size: 1.1rem;
            line-height: 1.5;
            word-wrap: break-word;
            word-break: break-word;
            font-weight: 500;
            display: block;
        }

        .explanation {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-left: 4px solid #f89820;
            border-radius: 0 10px 10px 0;
            display: none;
        }

        .explanation.show {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .explanation h4 {
            color: #f89820;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .explanation p {
            color: #555;
            line-height: 1.6;
        }

        .btn-container {
            margin-top: 25px;
            display: flex;
            justify-content: flex-end;
            gap: 15px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-primary {
            background: linear-gradient(135deg, #f89820, #5382a1);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(248, 152, 32, 0.4);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover:not(:disabled) {
            background: #545b62;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .results-card {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .results-card.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .score-circle {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f89820, #5382a1);
            margin: 0 auto 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            box-shadow: 0 10px 30px rgba(248, 152, 32, 0.3);
        }

        .score-text {
            text-align: center;
        }

        .score-number {
            font-size: 3.5rem;
            font-weight: bold;
        }

        .score-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        .results-message {
            font-size: 1.5rem;
            color: #333;
            margin-bottom: 15px;
        }

        .results-details {
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1rem;
        }

        .results-stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .stat-box {
            padding: 20px 30px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-box.correct {
            background: #d4edda;
            color: #155724;
        }

        .stat-box.wrong {
            background: #f8d7da;
            color: #721c24;
        }

        .stat-box.time {
            background: #e7f1ff;
            color: #004085;
        }

        .stat-box .stat-number {
            font-size: 2rem;
            font-weight: bold;
        }

        .stat-box .stat-label {
            font-size: 0.9rem;
        }

        .category-scores {
            text-align: left;
            max-width: 600px;
            margin: 0 auto 30px;
            max-height: 300px;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .category-score-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
            gap: 15px;
        }

        .category-score-item:last-child {
            border-bottom: none;
        }

        .category-name {
            flex: 1;
            font-weight: 500;
        }

        .category-score-value {
            min-width: 80px;
            text-align: right;
            font-weight: bold;
            color: #f89820;
        }

        .category-score-bar {
            width: 100px;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .category-score-fill {
            height: 100%;
            background: linear-gradient(90deg, #f89820, #5382a1);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .start-screen {
            text-align: center;
            padding: 40px;
        }

        .start-screen h2 {
            color: #333;
            margin-bottom: 20px;
        }

        .start-screen p {
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-bottom: 30px;
            text-align: left;
        }

        .category-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            background: #f8f9fa;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .category-item:hover {
            background: #fff5e6;
            transform: translateX(5px);
        }

        .category-item::before {
            content: "‚òï";
            color: #f89820;
            font-weight: bold;
            margin-right: 10px;
        }

        .quiz-options {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .quiz-options h3 {
            margin-bottom: 20px;
            color: #333;
            font-size: 1.2rem;
        }

        .options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }

        .option-group {
            margin-bottom: 0;
        }

        .option-group label {
            display: block;
            margin-bottom: 8px;
            color: #555;
            font-weight: 600;
        }

        .option-group select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            background: white;
            transition: all 0.3s ease;
        }

        .option-group select:focus {
            outline: none;
            border-color: #f89820;
            box-shadow: 0 0 0 3px rgba(248, 152, 32, 0.1);
        }

        .java-logo {
            font-size: 5rem;
            margin-bottom: 20px;
        }

        .btn-container-center {
            display: flex;
            gap: 15px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .resume-banner {
            background: linear-gradient(135deg, #17a2b8, #138496);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }

        .resume-banner .resume-text {
            flex: 1;
        }

        .resume-banner .resume-text strong {
            display: block;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .resume-banner .resume-text span {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .resume-banner .resume-buttons {
            display: flex;
            gap: 10px;
        }

        .resume-banner .btn-resume {
            background: white;
            color: #17a2b8;
            padding: 8px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .resume-banner .btn-resume:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        }

        .resume-banner .btn-dismiss {
            background: transparent;
            color: white;
            border: 2px solid white;
            padding: 8px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .resume-banner .btn-dismiss:hover {
            background: rgba(255,255,255,0.1);
        }

        .quit-btn-container {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
            display: flex;
            justify-content: center;
        }

        /* Visit Awards Styles */
        .visit-awards {
            background: linear-gradient(135deg, #fff8e1, #ffecb3);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            border: 2px solid #ffc107;
        }

        .visit-awards h3 {
            color: #f57c00;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .visit-stats {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
        }

        .visit-stat {
            text-align: center;
            padding: 10px 20px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .visit-stat .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #f89820;
        }

        .visit-stat .stat-label {
            font-size: 0.85rem;
            color: #666;
        }

        .awards-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .award-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 600;
            transition: transform 0.3s ease;
        }

        .award-badge:hover {
            transform: scale(1.05);
        }

        .award-badge.earned {
            background: linear-gradient(135deg, #ffd700, #ffb300);
            color: #5d4037;
            box-shadow: 0 3px 15px rgba(255, 193, 7, 0.4);
        }

        .award-badge.locked {
            background: #e0e0e0;
            color: #9e9e9e;
        }

        .award-badge .award-icon {
            font-size: 1.2rem;
        }

        .streak-indicator {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            text-align: center;
            margin-top: 15px;
        }

        .streak-indicator.active {
            animation: streakPulse 2s infinite;
        }

        @keyframes streakPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 107, 107, 0.4); }
            50% { box-shadow: 0 0 0 10px rgba(255, 107, 107, 0); }
        }

        /* Confetti Styles */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
            overflow: hidden;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            opacity: 0;
        }

        @keyframes confetti-fall {
            0% {
                opacity: 1;
                transform: translateY(-100px) rotate(0deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) rotate(720deg);
            }
        }

        /* Congratulation Popup */
        .congrats-popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        .congrats-popup.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .congrats-content {
            background: white;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 500px;
            margin: 20px;
            animation: popIn 0.5s ease;
        }

        @keyframes popIn {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); opacity: 1; }
        }

        .congrats-icon {
            font-size: 5rem;
            margin-bottom: 20px;
        }

        .congrats-title {
            font-size: 2rem;
            color: #f89820;
            margin-bottom: 15px;
        }

        .congrats-message {
            font-size: 1.1rem;
            color: #666;
            margin-bottom: 25px;
            line-height: 1.6;
        }

        .congrats-awards {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-bottom: 25px;
        }

        .congrats-btn {
            background: linear-gradient(135deg, #f89820, #5382a1);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .congrats-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(248, 152, 32, 0.4);
        }

        @media (max-width: 600px) {
            .quiz-header h1 {
                font-size: 1.8rem;
            }

            .question-text {
                font-size: 1.1rem;
            }

            .btn-container {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            .categories-grid {
                grid-template-columns: 1fr;
            }

            .options-grid {
                grid-template-columns: 1fr;
            }

            .results-stats {
                flex-direction: column;
                align-items: center;
            }

            .option {
                padding: 12px 15px;
            }

            .option-letter {
                width: 36px;
                height: 36px;
                min-width: 36px;
                font-size: 0.9rem;
                margin-right: 12px;
            }

            .option-text {
                font-size: 1rem;
            }

            .time-up-message {
                flex-direction: column;
                text-align: center;
            }

            .resume-banner {
                flex-direction: column;
                text-align: center;
            }

            .resume-banner .resume-buttons {
                width: 100%;
                justify-content: center;
            }

            .visit-stats {
                flex-direction: column;
            }

            .congrats-content {
                padding: 25px;
            }

            .congrats-icon {
                font-size: 3.5rem;
            }

            .congrats-title {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="quiz-container">
        <div class="quiz-header">
            <h1>‚òï Java Quiz</h1>
            <p>200 Questions across 20 Categories ‚Ä¢ 5 Random Options per Question</p>
        </div>

        <div class="progress-container" id="progressContainer" style="display: none;">
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div class="progress-text">
                <span>Question <span id="currentQuestion">1</span> of <span id="totalQuestions">20</span></span>
                <div class="timer-container">
                    <span class="timer-icon">‚è±Ô∏è</span>
                    <span class="timer" id="timer">00:00</span>
                </div>
                <span>‚úÖ <span id="correctCount">0</span> | ‚ùå <span id="wrongCount">0</span> | Score: <span id="currentScore">0</span>%</span>
            </div>
        </div>

        <div class="quiz-content">
            <!-- Start Screen -->
            <div class="start-screen" id="startScreen">
                <div class="java-logo">‚òï</div>
                <h2>Welcome to the Java Quiz!</h2>
                <p>Test your Java knowledge with 200 carefully crafted questions.<br>Each question shows 5 randomly selected options from 7 possible answers!</p>
                
                <!-- Visit Awards Section -->
                <div class="visit-awards" id="visitAwards">
                    <h3>üèÜ Your Achievements</h3>
                    <div class="visit-stats">
                        <div class="visit-stat">
                            <div class="stat-value" id="totalVisits">0</div>
                            <div class="stat-label">Total Visits</div>
                        </div>
                        <div class="visit-stat">
                            <div class="stat-value" id="quizzesCompleted">0</div>
                            <div class="stat-label">Quizzes Completed</div>
                        </div>
                        <div class="visit-stat">
                            <div class="stat-value" id="bestScore">0%</div>
                            <div class="stat-label">Best Score</div>
                        </div>
                        <div class="visit-stat">
                            <div class="stat-value" id="currentStreak">0</div>
                            <div class="stat-label">Day Streak üî•</div>
                        </div>
                    </div>
                    <div class="awards-container" id="awardsContainer">
                        <!-- Awards will be populated by JavaScript -->
                    </div>
                    <div class="streak-indicator" id="streakIndicator" style="display: none;">
                        <span id="streakMessage">üî• Keep your streak going!</span>
                    </div>
                </div>
                
                <!-- Resume Banner (hidden by default) -->
                <div class="resume-banner" id="resumeBanner" style="display: none;">
                    <div class="resume-text">
                        <strong>üìù Resume Previous Quiz?</strong>
                        <span id="resumeInfo">You have an unfinished quiz.</span>
                    </div>
                    <div class="resume-buttons">
                        <button class="btn-resume" onclick="resumeQuiz()">Resume</button>
                        <button class="btn-dismiss" onclick="dismissResume()">Start New</button>
                    </div>
                </div>
                
                <div class="quiz-options">
                    <h3>‚öôÔ∏è Quiz Settings</h3>
                    <div class="options-grid">
                        <div class="option-group">
                            <label for="categorySelect">üìÅ Category:</label>
                            <select id="categorySelect" onchange="saveSettings()">
                                <option value="all">All Categories (Random Mix)</option>
                                <option value="basics">1. Java Basics</option>
                                <option value="oop">2. OOP Concepts</option>
                                <option value="classes">3. Classes & Objects</option>
                                <option value="inheritance">4. Inheritance</option>
                                <option value="interfaces">5. Interfaces & Abstract</option>
                                <option value="exceptions">6. Exception Handling</option>
                                <option value="collections">7. Collections Framework</option>
                                <option value="generics">8. Generics</option>
                                <option value="streams">9. Streams API</option>
                                <option value="lambdas">10. Lambda Expressions</option>
                                <option value="multithreading">11. Multithreading</option>
                                <option value="io">12. I/O & NIO</option>
                                <option value="jdbc">13. JDBC</option>
                                <option value="strings">14. Strings</option>
                                <option value="memory">15. Memory Management</option>
                                <option value="annotations">16. Annotations</option>
                                <option value="reflection">17. Reflection</option>
                                <option value="modules">18. Modules (JPMS)</option>
                                <option value="records">19. Records & Sealed</option>
                                <option value="bestpractices">20. Best Practices</option>
                            </select>
                        </div>
                        <div class="option-group">
                            <label for="difficultySelect">üìä Difficulty:</label>
                            <select id="difficultySelect" onchange="saveSettings()">
                                <option value="all">All Difficulties</option>
                                <option value="easy">Easy Only</option>
                                <option value="medium">Medium Only</option>
                                <option value="hard">Hard Only</option>
                            </select>
                        </div>
                        <div class="option-group">
                            <label for="questionCount">üî¢ Questions:</label>
                            <select id="questionCount" onchange="saveSettings()">
                                <option value="10" selected>10 Questions</option>
                                <option value="20">20 Questions</option>
                                <option value="50">50 Questions</option>
                                <option value="100">100 Questions</option>
                                <option value="200">All 200 Questions</option>
                            </select>
                        </div>
                        <div class="option-group">
                            <label for="timerSelect">‚è±Ô∏è Timer:</label>
                            <select id="timerSelect" onchange="saveSettings()">
                                <option value="0">No Timer</option>
                                <option value="15">15 seconds per question</option>
                                <option value="30" selected>30 seconds per question</option>
                                <option value="45">45 seconds per question</option>
                                <option value="60">60 seconds per question</option>
                            </select>
                        </div>
                    </div>
                </div>

                <h3 style="margin-bottom: 15px; color: #333;">üìö 20 Categories Covered:</h3>
                <div class="categories-grid">
                    <div class="category-item">Java Basics</div>
                    <div class="category-item">OOP Concepts</div>
                    <div class="category-item">Classes & Objects</div>
                    <div class="category-item">Inheritance</div>
                    <div class="category-item">Interfaces & Abstract</div>
                    <div class="category-item">Exception Handling</div>
                    <div class="category-item">Collections Framework</div>
                    <div class="category-item">Generics</div>
                    <div class="category-item">Streams API</div>
                    <div class="category-item">Lambda Expressions</div>
                    <div class="category-item">Multithreading</div>
                    <div class="category-item">I/O & NIO</div>
                    <div class="category-item">JDBC</div>
                    <div class="category-item">Strings</div>
                    <div class="category-item">Memory Management</div>
                    <div class="category-item">Annotations</div>
                    <div class="category-item">Reflection</div>
                    <div class="category-item">Modules (JPMS)</div>
                    <div class="category-item">Records & Sealed</div>
                    <div class="category-item">Best Practices</div>
                </div>

                <button class="btn btn-primary" onclick="startQuiz()" style="padding: 15px 50px; font-size: 1.2rem;">
                    üöÄ Start Quiz
                </button>
            </div>

            <!-- Questions Container -->
            <div id="questionsContainer"></div>

            <!-- Results Screen -->
            <div class="results-card" id="resultsCard">
                <div class="score-circle">
                    <div class="score-text">
                        <div class="score-number" id="finalScore">0%</div>
                        <div class="score-label">Final Score</div>
                    </div>
                </div>
                <div class="results-message" id="resultsMessage"></div>
                <div class="results-details" id="resultsDetails"></div>
                
                <div class="results-stats">
                    <div class="stat-box correct">
                        <div class="stat-number" id="finalCorrect">0</div>
                        <div class="stat-label">Correct Answers</div>
                    </div>
                    <div class="stat-box wrong">
                        <div class="stat-number" id="finalWrong">0</div>
                        <div class="stat-label">Wrong Answers</div>
                    </div>
                    <div class="stat-box time">
                        <div class="stat-number" id="finalTime">00:00</div>
                        <div class="stat-label">Total Time</div>
                    </div>
                </div>
                
                <h3 style="margin-bottom: 15px;">üìä Score by Category:</h3>
                <div class="category-scores" id="categoryScores"></div>
                
                <div class="btn-container-center">
                    <button class="btn btn-primary" onclick="restartQuiz()">üîÑ Try Again</button>
                    <button class="btn btn-secondary" onclick="backToMenu()">üè† Back to Menu</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confetti Container -->
    <div class="confetti-container" id="confettiContainer"></div>

    <!-- Congratulation Popup -->
    <div class="congrats-popup" id="congratsPopup">
        <div class="congrats-content">
            <div class="congrats-icon" id="congratsIcon">üéâ</div>
            <h2 class="congrats-title" id="congratsTitle">Congratulations!</h2>
            <p class="congrats-message" id="congratsMessage">You did great!</p>
            <div class="congrats-awards" id="congratsAwards"></div>
            <button class="congrats-btn" onclick="closeCongratsPopup()">Continue</button>
        </div>
    </div>

    <script>
        // Complete quiz data - 200 questions across 20 categories (10 each)
        // All options have similar length to prevent guessing by length
        const allQuestions = {
            basics: [
                {
                    question: "Which method signature is the valid entry point for a Java application?",
                    options: ["public static void main(String[] args)", "public static void start(String[] args)", "public static void init(String[] args)", "public static void run(String[] args)", "public static void begin(String[] args)", "public static void exec(String[] args)", "public static void launch(String[] args)"],
                    correct: 0,
                    explanation: "The main method with signature 'public static void main(String[] args)' is the entry point where JVM starts execution.",
                    difficulty: "easy"
                },
                {
                    question: "Which keyword is used to declare a constant variable in Java?",
                    options: ["final", "const", "static", "fixed", "immutable", "constant", "readonly"],
                    correct: 0,
                    explanation: "The 'final' keyword is used to declare constants. Once assigned, the value cannot be changed.",
                    difficulty: "easy"
                },
                {
                    question: "What is the exact size of an int primitive type in Java?",
                    options: ["32 bits", "16 bits", "64 bits", "24 bits", "48 bits", "28 bits", "40 bits"],
                    correct: 0,
                    explanation: "In Java, an int is always 32 bits (4 bytes) regardless of the platform.",
                    difficulty: "easy"
                },
                {
                    question: "Which of these is a reference type, not a primitive type?",
                    options: ["String", "double", "boolean", "char", "int", "byte", "float"],
                    correct: 0,
                    explanation: "String is a class (reference type), not a primitive. The 8 primitives are: byte, short, int, long, float, double, boolean, char.",
                    difficulty: "easy"
                },
                {
                    question: "What is the default value of a boolean instance variable?",
                    options: ["false", "true", "null", "zero", "empty", "undefined", "none"],
                    correct: 0,
                    explanation: "The default value of a boolean instance variable is false.",
                    difficulty: "medium"
                },
                {
                    question: "What does the abbreviation JVM stand for in Java?",
                    options: ["Java Virtual Machine", "Java Variable Manager", "Java Version Module", "Java Verified Memory", "Java Visual Monitor", "Java Value Mapper", "Java Vector Model"],
                    correct: 0,
                    explanation: "JVM stands for Java Virtual Machine, which executes Java bytecode.",
                    difficulty: "easy"
                },
                {
                    question: "Which operator performs string concatenation in Java?",
                    options: ["+", "&", "*", "#", "@", "^", "%"],
                    correct: 0,
                    explanation: "The + operator is overloaded in Java to perform string concatenation.",
                    difficulty: "easy"
                },
                {
                    question: "What is the result of the expression 10 / 3 using integer division?",
                    options: ["3", "4", "2", "5", "1", "6", "0"],
                    correct: 0,
                    explanation: "Integer division truncates the decimal part, so 10/3 equals 3.",
                    difficulty: "medium"
                },
                {
                    question: "Which access modifier restricts access to the same class only?",
                    options: ["private", "protected", "public", "default", "internal", "package", "local"],
                    correct: 0,
                    explanation: "The private modifier restricts access to only within the same class.",
                    difficulty: "medium"
                },
                {
                    question: "What is bytecode in the context of Java programming?",
                    options: ["platform-independent intermediate code", "machine-specific native code", "human-readable source code", "encrypted binary executable", "compressed archive format", "database query language", "network protocol data"],
                    correct: 0,
                    explanation: "Bytecode is platform-independent intermediate code that JVM interprets or JIT-compiles.",
                    difficulty: "hard"
                }
            ],
            oop: [
                {
                    question: "Which set represents the four main OOP principles?",
                    options: ["Encapsulation, Inheritance, Polymorphism, Abstraction", "Compilation, Interpretation, Execution, Termination", "Creation, Modification, Deletion, Retrieval", "Input, Processing, Output, Storage", "Design, Development, Testing, Deployment", "Analysis, Design, Implementation, Maintenance", "Planning, Coding, Testing, Release"],
                    correct: 0,
                    explanation: "The four pillars of OOP are Encapsulation, Inheritance, Polymorphism, and Abstraction.",
                    difficulty: "easy"
                },
                {
                    question: "What does encapsulation primarily achieve in OOP?",
                    options: ["hiding internal implementation details", "creating multiple class instances", "inheriting parent class methods", "overriding existing functionality", "defining abstract interfaces", "managing memory allocation", "handling runtime exceptions"],
                    correct: 0,
                    explanation: "Encapsulation is bundling data and methods together while hiding internal implementation details.",
                    difficulty: "easy"
                },
                {
                    question: "What does polymorphism allow objects to do?",
                    options: ["take multiple different forms", "inherit from many classes", "encapsulate private data", "abstract complex logic", "serialize object state", "synchronize thread access", "validate input parameters"],
                    correct: 0,
                    explanation: "Polymorphism allows objects to be treated as instances of their parent class, enabling method overriding and overloading.",
                    difficulty: "easy"
                },
                {
                    question: "How do method overloading and overriding differ?",
                    options: ["overloading is compile-time, overriding is runtime", "overloading is runtime, overriding is compile-time", "both are resolved at compile-time only", "both are resolved at runtime only", "overloading requires inheritance always", "overriding changes parameter types only", "they are exactly the same thing"],
                    correct: 0,
                    explanation: "Overloading (same name, different parameters) is resolved at compile-time; overriding (same signature in subclass) is resolved at runtime.",
                    difficulty: "medium"
                },
                {
                    question: "What is the primary purpose of abstraction in OOP?",
                    options: ["showing essential features only", "hiding all class members", "preventing any inheritance", "enforcing strict typing", "enabling multiple inheritance", "disabling polymorphism", "removing all methods"],
                    correct: 0,
                    explanation: "Abstraction focuses on what an object does rather than how it does it, hiding implementation complexity.",
                    difficulty: "medium"
                },
                {
                    question: "What type of relationship does IS-A represent?",
                    options: ["inheritance relationship", "composition relationship", "aggregation relationship", "dependency relationship", "association relationship", "delegation relationship", "realization relationship"],
                    correct: 0,
                    explanation: "IS-A represents inheritance where a subclass 'is a' type of its superclass.",
                    difficulty: "medium"
                },
                {
                    question: "What type of relationship does HAS-A represent?",
                    options: ["composition or aggregation", "inheritance or extension", "implementation or realization", "dependency or coupling", "association or linking", "delegation or forwarding", "abstraction or hiding"],
                    correct: 0,
                    explanation: "HAS-A represents composition or aggregation where a class contains reference to another class.",
                    difficulty: "medium"
                },
                {
                    question: "What does tight coupling between classes indicate?",
                    options: ["high dependency between classes", "low dependency between classes", "no relationship whatsoever", "optimal design pattern", "proper encapsulation achieved", "correct abstraction level", "ideal inheritance hierarchy"],
                    correct: 0,
                    explanation: "Tight coupling means classes are highly dependent on each other, making changes difficult.",
                    difficulty: "hard"
                },
                {
                    question: "What does high cohesion in a class indicate?",
                    options: ["elements belong together logically", "many dependencies on others", "multiple responsibilities exist", "poor encapsulation design", "excessive inheritance depth", "too many public methods", "lack of abstraction"],
                    correct: 0,
                    explanation: "High cohesion means a class has a single, well-defined purpose with closely related methods.",
                    difficulty: "hard"
                },
                {
                    question: "Which principle states 'depend on abstractions, not concretions'?",
                    options: ["Dependency Inversion Principle", "Single Responsibility Principle", "Open Closed Principle", "Liskov Substitution Principle", "Interface Segregation Principle", "Law of Demeter Principle", "Composition Over Inheritance"],
                    correct: 0,
                    explanation: "This is part of the Dependency Inversion Principle, promoting loose coupling through abstractions.",
                    difficulty: "hard"
                }
            ],
            classes: [
                {
                    question: "Which keyword creates a new object instance in Java?",
                    options: ["new", "create", "make", "build", "init", "alloc", "spawn"],
                    correct: 0,
                    explanation: "The 'new' keyword allocates memory and creates a new instance of a class.",
                    difficulty: "easy"
                },
                {
                    question: "What is the primary purpose of a constructor?",
                    options: ["initialize new object instances", "destroy existing objects", "define static methods", "declare class variables", "implement interfaces", "extend parent classes", "handle exceptions"],
                    correct: 0,
                    explanation: "A constructor is a special method with the same name as the class, used to initialize new objects.",
                    difficulty: "easy"
                },
                {
                    question: "When does the compiler provide a default constructor?",
                    options: ["when no constructor is defined", "when class is abstract", "when class is final", "when class has fields", "when class has methods", "when class is public", "when class is static"],
                    correct: 0,
                    explanation: "If no constructor is defined, Java provides a default no-argument constructor.",
                    difficulty: "easy"
                },
                {
                    question: "Can a constructor have private access modifier?",
                    options: ["yes, used in Singleton pattern", "no, must always be public", "only in abstract classes", "only in final classes", "only with static modifier", "only in inner classes", "only in interfaces"],
                    correct: 0,
                    explanation: "Private constructors prevent instantiation from outside, commonly used in Singleton pattern.",
                    difficulty: "medium"
                },
                {
                    question: "What does the 'this' keyword reference?",
                    options: ["current object instance", "parent class object", "child class object", "static class member", "local method variable", "constructor parameter", "interface reference"],
                    correct: 0,
                    explanation: "'this' refers to the current object instance, useful for disambiguation and constructor chaining.",
                    difficulty: "easy"
                },
                {
                    question: "What is constructor chaining in Java?",
                    options: ["calling one constructor from another", "creating multiple objects together", "linking classes in hierarchy", "connecting methods sequentially", "binding variables together", "joining interfaces together", "merging packages together"],
                    correct: 0,
                    explanation: "Constructor chaining uses this() to call another constructor in same class or super() for parent class.",
                    difficulty: "medium"
                },
                {
                    question: "When does a static initialization block execute?",
                    options: ["once when class is loaded", "for each object created", "when method is called", "when variable is accessed", "when exception is thrown", "when program terminates", "when garbage collected"],
                    correct: 0,
                    explanation: "Static blocks run once when the class is first loaded into memory, before any objects are created.",
                    difficulty: "medium"
                },
                {
                    question: "When does an instance initializer block execute?",
                    options: ["before constructor for each object", "after constructor completes", "only once per class", "only for static members", "only in abstract classes", "only in final classes", "only in inner classes"],
                    correct: 0,
                    explanation: "Instance initializer blocks run before the constructor each time an object is created.",
                    difficulty: "hard"
                },
                {
                    question: "What is the correct initialization order in Java?",
                    options: ["static blocks, instance blocks, constructor", "constructor, static blocks, instance blocks", "instance blocks, constructor, static blocks", "constructor, instance blocks, static blocks", "static blocks, constructor, instance blocks", "instance blocks, static blocks, constructor", "all execute simultaneously"],
                    correct: 0,
                    explanation: "Order: static blocks (once), then instance blocks and constructor (for each object).",
                    difficulty: "hard"
                },
                {
                    question: "Can a class define multiple constructors?",
                    options: ["yes, through constructor overloading", "no, only one is allowed", "only two are permitted", "only with different names", "only in abstract classes", "only in final classes", "only in inner classes"],
                    correct: 0,
                    explanation: "Constructor overloading allows multiple constructors with different parameter lists.",
                    difficulty: "easy"
                }
            ],
            inheritance: [
                {
                    question: "Which keyword is used to inherit from a class?",
                    options: ["extends", "implements", "inherits", "derives", "uses", "includes", "imports"],
                    correct: 0,
                    explanation: "The 'extends' keyword is used to inherit from a class.",
                    difficulty: "easy"
                },
                {
                    question: "Does Java support multiple class inheritance?",
                    options: ["no, only single inheritance", "yes, unlimited inheritance", "yes, up to two classes", "yes, up to three classes", "only for abstract classes", "only for final classes", "only for inner classes"],
                    correct: 0,
                    explanation: "Java doesn't support multiple class inheritance to avoid the diamond problem, but allows multiple interface implementation.",
                    difficulty: "easy"
                },
                {
                    question: "What does the 'super' keyword reference?",
                    options: ["parent class members", "current class members", "child class members", "static class members", "interface members", "package members", "module members"],
                    correct: 0,
                    explanation: "'super' accesses parent class constructors, methods, and fields.",
                    difficulty: "easy"
                },
                {
                    question: "Can a subclass access private members of its superclass?",
                    options: ["no, private members are not inherited", "yes, all members are accessible", "only through reflection API", "only in same source file", "only if marked final", "only if marked static", "only if marked protected"],
                    correct: 0,
                    explanation: "Private members are not accessible in subclasses; use protected or public for inheritance.",
                    difficulty: "medium"
                },
                {
                    question: "What is method overriding in Java?",
                    options: ["redefining parent method in child class", "defining multiple method signatures", "hiding static method in child", "creating new method entirely", "removing parent method", "renaming existing method", "copying method implementation"],
                    correct: 0,
                    explanation: "Overriding provides a specific implementation of a method already defined in the parent class.",
                    difficulty: "easy"
                },
                {
                    question: "Which annotation indicates method overriding?",
                    options: ["@Override", "@Overriding", "@Overwrite", "@Replace", "@Redefine", "@Implement", "@Extend"],
                    correct: 0,
                    explanation: "@Override annotation helps catch errors if the method doesn't actually override a parent method.",
                    difficulty: "easy"
                },
                {
                    question: "Can static methods be overridden in Java?",
                    options: ["no, they are hidden instead", "yes, like instance methods", "only in abstract classes", "only in final classes", "only if public access", "only if protected access", "only if default access"],
                    correct: 0,
                    explanation: "Static methods belong to the class, not instances, so they are hidden rather than overridden.",
                    difficulty: "medium"
                },
                {
                    question: "What is the diamond problem in inheritance?",
                    options: ["ambiguity from multiple inheritance paths", "memory leak in object hierarchy", "compilation error in generics", "runtime exception in casting", "deadlock in multithreading", "overflow in recursion", "conflict in serialization"],
                    correct: 0,
                    explanation: "Diamond problem occurs when a class inherits from two classes that have the same method, causing ambiguity.",
                    difficulty: "hard"
                },
                {
                    question: "Can a final method be overridden by subclasses?",
                    options: ["no, final prevents overriding", "yes, always possible", "only in same package", "only if public access", "only in abstract classes", "only in interfaces", "only with reflection"],
                    correct: 0,
                    explanation: "The final keyword prevents method overriding in subclasses.",
                    difficulty: "medium"
                },
                {
                    question: "What is covariant return type in Java?",
                    options: ["overriding method returns subtype", "overriding method returns supertype", "overriding method returns same type", "overriding method returns void", "overriding method returns Object", "overriding method returns primitive", "overriding method returns array"],
                    correct: 0,
                    explanation: "Since Java 5, overriding methods can return a subtype of the declared return type.",
                    difficulty: "hard"
                }
            ],
            interfaces: [
                {
                    question: "Which keyword is used to implement an interface?",
                    options: ["implements", "extends", "interface", "abstract", "realizes", "uses", "includes"],
                    correct: 0,
                    explanation: "The 'implements' keyword is used when a class implements an interface.",
                    difficulty: "easy"
                },
                {
                    question: "Can interfaces have method implementations since Java 8?",
                    options: ["yes, using default and static methods", "no, only abstract methods allowed", "only in abstract interfaces", "only in functional interfaces", "only in marker interfaces", "only in sealed interfaces", "only in nested interfaces"],
                    correct: 0,
                    explanation: "Since Java 8, interfaces can have default and static methods with implementations.",
                    difficulty: "medium"
                },
                {
                    question: "What defines a functional interface in Java?",
                    options: ["exactly one abstract method", "exactly two abstract methods", "no abstract methods at all", "only default methods present", "only static methods present", "only private methods present", "multiple abstract methods"],
                    correct: 0,
                    explanation: "A functional interface has exactly one abstract method and can be used with lambda expressions.",
                    difficulty: "medium"
                },
                {
                    question: "How do abstract classes differ from interfaces?",
                    options: ["abstract classes can have state and constructors", "interfaces can have state and constructors", "they are exactly identical", "abstract classes cannot have methods", "interfaces must have implementations", "abstract classes cannot be extended", "interfaces cannot be implemented"],
                    correct: 0,
                    explanation: "Abstract classes can have instance variables, constructors, and any access modifiers; interfaces are more restricted.",
                    difficulty: "medium"
                },
                {
                    question: "Can an interface extend another interface?",
                    options: ["yes, using extends keyword", "no, interfaces cannot extend", "only using implements keyword", "only abstract interfaces can", "only functional interfaces can", "only marker interfaces can", "only nested interfaces can"],
                    correct: 0,
                    explanation: "Interfaces can extend other interfaces using the extends keyword, even multiple interfaces.",
                    difficulty: "easy"
                },
                {
                    question: "What is a marker interface in Java?",
                    options: ["interface with no methods defined", "interface with one method only", "interface with default methods", "interface with static methods", "interface with private methods", "interface with constants only", "interface with nested types"],
                    correct: 0,
                    explanation: "Marker interfaces like Serializable have no methods but mark classes for special treatment.",
                    difficulty: "medium"
                },
                {
                    question: "What are default methods in interfaces?",
                    options: ["methods with implementation using default keyword", "methods without any implementation", "methods that must be overridden", "methods that cannot be overridden", "methods with private access", "methods with protected access", "methods with package access"],
                    correct: 0,
                    explanation: "Default methods provide implementation in interfaces, allowing backward compatibility.",
                    difficulty: "medium"
                },
                {
                    question: "Can interfaces have private methods since Java 9?",
                    options: ["yes, for code sharing between defaults", "no, all methods must be public", "only if they are static", "only if they are abstract", "only if they are final", "only in functional interfaces", "only in marker interfaces"],
                    correct: 0,
                    explanation: "Java 9 introduced private methods in interfaces to share code between default methods.",
                    difficulty: "hard"
                },
                {
                    question: "What does @FunctionalInterface annotation ensure?",
                    options: ["interface has exactly one abstract method", "interface has no abstract methods", "interface has multiple abstract methods", "interface has only default methods", "interface has only static methods", "interface has only constants", "interface has only nested types"],
                    correct: 0,
                    explanation: "@FunctionalInterface is optional but helps catch errors if more than one abstract method is added.",
                    difficulty: "medium"
                },
                {
                    question: "Can abstract classes implement interfaces partially?",
                    options: ["yes, leaving methods for subclasses", "no, must implement all methods", "only if interface is abstract", "only if methods are default", "only if methods are static", "only in same package", "only with same access"],
                    correct: 0,
                    explanation: "Abstract classes can implement interfaces partially, leaving implementation to concrete subclasses.",
                    difficulty: "hard"
                }
            ],
            exceptions: [
                {
                    question: "What is the root class of all exceptions in Java?",
                    options: ["Throwable", "Exception", "Error", "RuntimeException", "BaseException", "RootException", "CoreException"],
                    correct: 0,
                    explanation: "Throwable is the parent class of both Exception and Error classes.",
                    difficulty: "easy"
                },
                {
                    question: "How do checked and unchecked exceptions differ?",
                    options: ["checked must be handled, unchecked optional", "unchecked must be handled, checked optional", "both must always be handled", "neither needs to be handled", "checked are runtime only", "unchecked are compile-time only", "they are exactly identical"],
                    correct: 0,
                    explanation: "Checked exceptions must be caught or declared in throws clause; unchecked (RuntimeException) don't require handling.",
                    difficulty: "medium"
                },
                {
                    question: "Which keyword explicitly throws an exception?",
                    options: ["throw", "throws", "thrown", "throwing", "raise", "signal", "fire"],
                    correct: 0,
                    explanation: "'throw' is used to explicitly throw an exception object.",
                    difficulty: "easy"
                },
                {
                    question: "What is the purpose of the finally block?",
                    options: ["code that always executes", "code that never executes", "code for catching exceptions", "code for throwing exceptions", "code for declaring exceptions", "code for logging exceptions", "code for ignoring exceptions"],
                    correct: 0,
                    explanation: "Finally block always executes, used for cleanup like closing resources.",
                    difficulty: "easy"
                },
                {
                    question: "Can try block exist without catch block?",
                    options: ["yes, with finally or try-with-resources", "no, catch is always required", "only in static methods", "only in main method", "only with throws clause", "only with throw statement", "only in abstract methods"],
                    correct: 0,
                    explanation: "Try can be used with finally alone or with try-with-resources without explicit catch.",
                    difficulty: "medium"
                },
                {
                    question: "What does try-with-resources automatically do?",
                    options: ["closes resources implementing AutoCloseable", "catches all thrown exceptions", "logs all error messages", "retries failed operations", "ignores minor exceptions", "converts checked to unchecked", "wraps exceptions in runtime"],
                    correct: 0,
                    explanation: "Try-with-resources automatically closes resources implementing AutoCloseable interface.",
                    difficulty: "medium"
                },
                {
                    question: "What is exception chaining in Java?",
                    options: ["wrapping one exception in another", "throwing multiple exceptions together", "catching exceptions sequentially", "ignoring nested exceptions", "converting exception types", "logging exception hierarchy", "rethrowing same exception"],
                    correct: 0,
                    explanation: "Exception chaining preserves the original exception as the cause of a new exception.",
                    difficulty: "hard"
                },
                {
                    question: "Can multiple exceptions be caught in single catch block?",
                    options: ["yes, using pipe operator since Java 7", "no, one exception per catch only", "only checked exceptions together", "only unchecked exceptions together", "only with same parent class", "only in try-with-resources", "only in finally block"],
                    correct: 0,
                    explanation: "Multi-catch syntax: catch (IOException | SQLException e) handles multiple exception types.",
                    difficulty: "medium"
                },
                {
                    question: "What happens if finally block throws an exception?",
                    options: ["it suppresses the original exception", "original exception is preserved", "both exceptions are thrown", "compilation error occurs", "runtime error only occurs", "finally block is skipped", "program terminates immediately"],
                    correct: 0,
                    explanation: "An exception in finally block suppresses the original exception unless using try-with-resources.",
                    difficulty: "hard"
                },
                {
                    question: "How do throw and throws keywords differ?",
                    options: ["throw raises, throws declares in signature", "throws raises, throw declares in signature", "both raise exceptions directly", "both declare in method signature", "throw is for checked only", "throws is for unchecked only", "they are exactly identical"],
                    correct: 0,
                    explanation: "'throw' is used to throw an exception; 'throws' declares exceptions a method might throw.",
                    difficulty: "easy"
                }
            ],
            collections: [
                {
                    question: "What is the root interface of Collection framework?",
                    options: ["Collection", "List", "Set", "Map", "Iterable", "Iterator", "Collections"],
                    correct: 0,
                    explanation: "Collection is the root interface for List, Set, and Queue hierarchies. Map is separate.",
                    difficulty: "easy"
                },
                {
                    question: "How do ArrayList and LinkedList differ internally?",
                    options: ["ArrayList uses array, LinkedList uses nodes", "LinkedList uses array, ArrayList uses nodes", "both use dynamic arrays internally", "both use linked nodes internally", "ArrayList is synchronized always", "LinkedList is synchronized always", "they are exactly identical"],
                    correct: 0,
                    explanation: "ArrayList provides O(1) random access; LinkedList provides O(1) insertion/deletion at ends.",
                    difficulty: "medium"
                },
                {
                    question: "Which collection type prohibits duplicate elements?",
                    options: ["Set", "List", "Queue", "Deque", "Stack", "Vector", "ArrayList"],
                    correct: 0,
                    explanation: "Set interface and its implementations (HashSet, TreeSet) don't allow duplicates.",
                    difficulty: "easy"
                },
                {
                    question: "How do HashMap and TreeMap differ in ordering?",
                    options: ["HashMap unordered, TreeMap sorted", "TreeMap unordered, HashMap sorted", "both maintain insertion order", "both maintain sorted order", "both are completely unordered", "HashMap uses tree structure", "TreeMap uses hash structure"],
                    correct: 0,
                    explanation: "HashMap provides O(1) operations but no ordering; TreeMap maintains sorted order with O(log n) operations.",
                    difficulty: "medium"
                },
                {
                    question: "How do HashMap and Hashtable differ?",
                    options: ["HashMap allows null, not synchronized", "Hashtable allows null, not synchronized", "both allow null values", "neither allows null values", "HashMap is synchronized", "Hashtable is not synchronized", "they are exactly identical"],
                    correct: 0,
                    explanation: "HashMap allows one null key and multiple null values, is not synchronized. Hashtable is synchronized, no nulls.",
                    difficulty: "medium"
                },
                {
                    question: "What is ConcurrentHashMap designed for?",
                    options: ["thread-safe operations with better concurrency", "single-threaded operations only", "sorted key-value storage", "linked key-value storage", "weak reference storage", "soft reference storage", "immutable key-value storage"],
                    correct: 0,
                    explanation: "ConcurrentHashMap uses segment locking for better concurrent performance than Hashtable.",
                    difficulty: "hard"
                },
                {
                    question: "What does Comparable interface define?",
                    options: ["natural ordering for objects", "equality comparison only", "hash code generation", "string representation", "object cloning behavior", "serialization format", "iteration sequence"],
                    correct: 0,
                    explanation: "Comparable's compareTo() method defines the natural ordering of objects for sorting.",
                    difficulty: "medium"
                },
                {
                    question: "How do Comparable and Comparator differ?",
                    options: ["Comparable is internal, Comparator external", "Comparator is internal, Comparable external", "both are defined internally", "both are defined externally", "Comparable uses compare method", "Comparator uses compareTo method", "they are exactly identical"],
                    correct: 0,
                    explanation: "Comparable modifies the class (compareTo), Comparator is separate (compare) for custom orderings.",
                    difficulty: "medium"
                },
                {
                    question: "What does a fail-fast iterator do?",
                    options: ["throws exception on concurrent modification", "ignores concurrent modifications", "allows concurrent modifications", "prevents any modifications", "caches all modifications", "delays all modifications", "queues all modifications"],
                    correct: 0,
                    explanation: "Fail-fast iterators immediately throw exception if the collection is structurally modified during iteration.",
                    difficulty: "hard"
                },
                {
                    question: "What is the average time complexity of HashMap get?",
                    options: ["O(1)", "O(n)", "O(log n)", "O(n¬≤)", "O(n log n)", "O(2^n)", "O(n!)"],
                    correct: 0,
                    explanation: "HashMap provides O(1) average case for get/put operations, O(n) worst case with many collisions.",
                    difficulty: "medium"
                }
            ],
            generics: [
                {
                    question: "What is the primary purpose of generics in Java?",
                    options: ["type safety and code reusability", "faster program execution", "smaller bytecode size", "better memory management", "automatic null handling", "exception prevention", "thread synchronization"],
                    correct: 0,
                    explanation: "Generics provide compile-time type safety and eliminate the need for casting.",
                    difficulty: "easy"
                },
                {
                    question: "What does <T> represent in generic declarations?",
                    options: ["type parameter placeholder", "specific class reference", "primitive type indicator", "interface type marker", "annotation type symbol", "method type specifier", "variable type prefix"],
                    correct: 0,
                    explanation: "T is a type parameter that will be replaced with an actual type when the generic is used.",
                    difficulty: "easy"
                },
                {
                    question: "What is type erasure in Java generics?",
                    options: ["generic type info removed at compile time", "generic type info added at runtime", "generic type info stored in bytecode", "generic type info cached in memory", "generic type info logged to file", "generic type info sent to JVM", "generic type info encrypted"],
                    correct: 0,
                    explanation: "Type erasure removes generic type information during compilation for backward compatibility.",
                    difficulty: "medium"
                },
                {
                    question: "What is a bounded type parameter?",
                    options: ["type parameter with upper or lower bounds", "type parameter without any restrictions", "type parameter for primitives only", "type parameter for objects only", "type parameter for arrays only", "type parameter for methods only", "type parameter for classes only"],
                    correct: 0,
                    explanation: "Bounded types restrict type parameters: <T extends Number> limits T to Number and subclasses.",
                    difficulty: "medium"
                },
                {
                    question: "What does the <?> wildcard represent?",
                    options: ["unknown type (unbounded wildcard)", "any primitive type only", "null type specifically", "Object type exactly", "void type only", "error type indicator", "empty type marker"],
                    correct: 0,
                    explanation: "The unbounded wildcard <?> represents an unknown type, useful for read-only operations.",
                    difficulty: "medium"
                },
                {
                    question: "What does <? extends T> represent?",
                    options: ["T or any of its subtypes", "T or any of its supertypes", "exactly type T only", "any type whatsoever", "no type at all", "multiple types together", "primitive types only"],
                    correct: 0,
                    explanation: "Upper bounded wildcard accepts T or any subtype of T, useful for reading.",
                    difficulty: "medium"
                },
                {
                    question: "What does <? super T> represent?",
                    options: ["T or any of its supertypes", "T or any of its subtypes", "exactly type T only", "any type whatsoever", "no type at all", "multiple types together", "primitive types only"],
                    correct: 0,
                    explanation: "Lower bounded wildcard accepts T or any supertype of T, useful for writing.",
                    difficulty: "hard"
                },
                {
                    question: "Can you create an array of generic type?",
                    options: ["no, due to type erasure", "yes, without restrictions", "only with wildcards", "only with bounds", "only with primitives", "only with objects", "only with interfaces"],
                    correct: 0,
                    explanation: "Generic array creation is not allowed because type information is erased at runtime.",
                    difficulty: "hard"
                },
                {
                    question: "What does PECS principle stand for?",
                    options: ["Producer Extends, Consumer Super", "Private Extends, Class Super", "Public Extends, Constant Super", "Parameter Extends, Constructor Super", "Protected Extends, Collection Super", "Package Extends, Component Super", "Primitive Extends, Cast Super"],
                    correct: 0,
                    explanation: "PECS: Use extends when you only get values (producer), super when you only put values (consumer).",
                    difficulty: "hard"
                },
                {
                    question: "Can primitive types be used as type parameters?",
                    options: ["no, only reference types allowed", "yes, all types are allowed", "only int and long allowed", "only with autoboxing enabled", "only in Java 8 and later", "only with arrays", "only with collections"],
                    correct: 0,
                    explanation: "Generics only work with reference types; use wrapper classes (Integer, Double) for primitives.",
                    difficulty: "easy"
                }
            ],
            streams: [
                {
                    question: "What is a Stream in Java 8 and later?",
                    options: ["sequence supporting functional operations", "file input output channel", "network socket connection", "thread execution pool", "memory buffer area", "database connection pool", "message queue system"],
                    correct: 0,
                    explanation: "Streams provide a functional approach to processing collections of objects.",
                    difficulty: "easy"
                },
                {
                    question: "How do intermediate and terminal operations differ?",
                    options: ["intermediate returns Stream, terminal produces result", "terminal returns Stream, intermediate produces result", "both return Stream objects", "both produce final results", "intermediate is eager evaluation", "terminal is lazy evaluation", "they are exactly identical"],
                    correct: 0,
                    explanation: "Intermediate operations are lazy and return streams; terminal operations trigger processing and return results.",
                    difficulty: "medium"
                },
                {
                    question: "Which of these is an intermediate operation?",
                    options: ["filter()", "collect()", "forEach()", "count()", "reduce()", "findFirst()", "anyMatch()"],
                    correct: 0,
                    explanation: "filter(), map(), sorted(), distinct() are intermediate operations returning new streams.",
                    difficulty: "easy"
                },
                {
                    question: "Which of these is a terminal operation?",
                    options: ["collect()", "filter()", "map()", "sorted()", "distinct()", "limit()", "skip()"],
                    correct: 0,
                    explanation: "collect(), forEach(), reduce(), count(), findFirst() are terminal operations.",
                    difficulty: "easy"
                },
                {
                    question: "What does the map() operation do?",
                    options: ["transforms each element using function", "filters elements by condition", "sorts elements by comparator", "groups elements by key", "counts total elements", "removes duplicate elements", "limits element count"],
                    correct: 0,
                    explanation: "map() applies a function to each element, transforming the stream.",
                    difficulty: "easy"
                },
                {
                    question: "What does flatMap() operation do?",
                    options: ["flattens nested structures into single stream", "creates nested stream structures", "maps to single scalar value", "filters nested element values", "sorts nested element values", "groups nested element values", "counts nested element values"],
                    correct: 0,
                    explanation: "flatMap() flattens Stream<Stream<T>> into Stream<T>, useful for nested collections.",
                    difficulty: "medium"
                },
                {
                    question: "What does the Collectors class provide?",
                    options: ["implementations for collect operation", "methods for creating streams", "functions for filtering streams", "comparators for sorting streams", "predicates for matching streams", "suppliers for generating streams", "consumers for processing streams"],
                    correct: 0,
                    explanation: "Collectors provides toList(), toSet(), groupingBy(), joining() and other collection operations.",
                    difficulty: "medium"
                },
                {
                    question: "What is a parallel stream in Java?",
                    options: ["stream processing elements concurrently", "stream processing sequentially", "stream with sorted elements", "stream with filtered elements", "stream with mapped elements", "stream with limited elements", "stream with distinct elements"],
                    correct: 0,
                    explanation: "Parallel streams use multiple threads to process elements concurrently for better performance.",
                    difficulty: "medium"
                },
                {
                    question: "Can a stream be reused after terminal operation?",
                    options: ["no, streams are consumed once", "yes, streams are reusable", "only parallel streams reusable", "only sequential streams reusable", "only with reset method", "only with reuse method", "only infinite streams reusable"],
                    correct: 0,
                    explanation: "Streams are consumed after terminal operation; create a new stream for reprocessing.",
                    difficulty: "medium"
                },
                {
                    question: "What is Optional class used for in Java?",
                    options: ["container that may or may not contain value", "container that always contains value", "container for multiple values", "container for primitive values", "container for null values only", "container for exception values", "container for stream values"],
                    correct: 0,
                    explanation: "Optional is a container object used to represent presence or absence of a value, avoiding null.",
                    difficulty: "medium"
                }
            ],
            lambdas: [
                {
                    question: "What is a lambda expression in Java?",
                    options: ["anonymous function for functional interface", "named function in class", "abstract method declaration", "interface definition syntax", "exception handler block", "thread definition syntax", "variable declaration syntax"],
                    correct: 0,
                    explanation: "Lambda expressions provide concise syntax for implementing functional interfaces.",
                    difficulty: "easy"
                },
                {
                    question: "What is the correct lambda expression syntax?",
                    options: ["(parameters) -> expression", "parameters => expression", "function(parameters) body", "lambda(parameters) body", "[parameters] -> expression", "{parameters} -> expression", "<parameters> -> expression"],
                    correct: 0,
                    explanation: "Lambda syntax: (params) -> expression or (params) -> { statements; }",
                    difficulty: "easy"
                },
                {
                    question: "Can lambda expressions access local variables?",
                    options: ["yes, if effectively final", "no, never allowed", "only static variables", "only instance variables", "only global variables", "only public variables", "only private variables"],
                    correct: 0,
                    explanation: "Lambdas can access local variables that are effectively final (not modified after initialization).",
                    difficulty: "medium"
                },
                {
                    question: "What is a method reference in Java?",
                    options: ["shorthand for lambda calling existing method", "creating new method dynamically", "deleting existing method", "overriding parent method", "overloading existing method", "hiding static method", "copying method implementation"],
                    correct: 0,
                    explanation: "Method references (Class::method) are shorthand for lambdas that just call an existing method.",
                    difficulty: "medium"
                },
                {
                    question: "What does Predicate functional interface do?",
                    options: ["takes argument, returns boolean", "takes no argument at all", "returns void always", "takes two arguments", "returns String always", "returns int always", "returns Object always"],
                    correct: 0,
                    explanation: "Predicate<T> has test(T t) method returning boolean, used for filtering.",
                    difficulty: "medium"
                },
                {
                    question: "What does Function functional interface do?",
                    options: ["takes argument, returns different type", "returns void always", "takes no argument", "returns boolean always", "returns same type always", "takes multiple arguments", "returns collection always"],
                    correct: 0,
                    explanation: "Function<T,R> has apply(T t) returning R, used for transformations.",
                    difficulty: "medium"
                },
                {
                    question: "What does Consumer functional interface do?",
                    options: ["takes argument, returns void", "returns value always", "takes no argument", "returns boolean always", "takes two arguments", "returns collection always", "returns Optional always"],
                    correct: 0,
                    explanation: "Consumer<T> has accept(T t) returning void, used for side effects.",
                    difficulty: "medium"
                },
                {
                    question: "What does Supplier functional interface do?",
                    options: ["takes no argument, returns value", "takes argument always", "returns void always", "returns boolean always", "takes multiple arguments", "returns collection always", "returns stream always"],
                    correct: 0,
                    explanation: "Supplier<T> has get() returning T with no parameters, used for lazy evaluation.",
                    difficulty: "medium"
                },
                {
                    question: "How do Runnable and Callable interfaces differ?",
                    options: ["Callable returns value and throws checked exception", "Runnable returns value and throws checked exception", "both return values always", "neither returns values", "Runnable throws checked exceptions", "Callable returns void always", "they are exactly identical"],
                    correct: 0,
                    explanation: "Runnable.run() returns void; Callable.call() returns value and can throw checked exceptions.",
                    difficulty: "hard"
                },
                {
                    question: "What types of method references exist in Java?",
                    options: ["static, instance, and constructor references", "only static method references", "only instance method references", "only constructor references", "only abstract method references", "only final method references", "only public method references"],
                    correct: 0,
                    explanation: "Four types: static (Class::staticMethod), instance (obj::method), arbitrary object (Class::method), constructor (Class::new).",
                    difficulty: "hard"
                }
            ],
            multithreading: [
                {
                    question: "What are two ways to create a thread in Java?",
                    options: ["extend Thread or implement Runnable", "only extend Thread class", "only implement Runnable interface", "use Thread.create() method", "use Thread.spawn() method", "implement Callable only", "extend Runnable class"],
                    correct: 0,
                    explanation: "Threads can be created by extending Thread class or implementing Runnable interface.",
                    difficulty: "easy"
                },
                {
                    question: "What does synchronized keyword ensure?",
                    options: ["only one thread accesses code at time", "multiple threads access simultaneously", "threads execute in parallel", "threads are created faster", "threads are destroyed faster", "threads share all data", "threads ignore all locks"],
                    correct: 0,
                    explanation: "synchronized provides mutual exclusion, preventing race conditions in concurrent code.",
                    difficulty: "easy"
                },
                {
                    question: "What is a deadlock in multithreading?",
                    options: ["threads waiting for each other indefinitely", "thread completing successfully", "thread starting execution", "thread sleeping temporarily", "thread running continuously", "thread yielding control", "thread joining another"],
                    correct: 0,
                    explanation: "Deadlock occurs when threads hold locks and wait for locks held by each other.",
                    difficulty: "medium"
                },
                {
                    question: "What does volatile keyword ensure?",
                    options: ["visibility of changes across threads", "variable becomes constant", "faster variable access", "thread-local variable copy", "variable cannot change", "variable is cached", "synchronization is disabled"],
                    correct: 0,
                    explanation: "volatile ensures that reads and writes go directly to main memory, visible to all threads.",
                    difficulty: "medium"
                },
                {
                    question: "How do wait() and sleep() methods differ?",
                    options: ["wait() releases lock, sleep() keeps lock", "sleep() releases lock, wait() keeps lock", "both release the lock", "neither releases the lock", "wait() is static method", "sleep() is instance method", "they are exactly identical"],
                    correct: 0,
                    explanation: "wait() releases the monitor lock and must be called from synchronized context; sleep() keeps the lock.",
                    difficulty: "medium"
                },
                {
                    question: "What is a thread pool in Java?",
                    options: ["collection of reusable worker threads", "single dedicated thread", "array of thread objects", "list of thread references", "queue of thread tasks", "stack of thread frames", "set of thread groups"],
                    correct: 0,
                    explanation: "Thread pools manage a collection of worker threads, reducing overhead of thread creation.",
                    difficulty: "medium"
                },
                {
                    question: "What is ExecutorService used for?",
                    options: ["managing thread pools and task execution", "creating single threads only", "destroying threads only", "pausing threads only", "resuming threads only", "naming threads only", "grouping threads only"],
                    correct: 0,
                    explanation: "ExecutorService provides methods to manage termination and produce Futures for tracking tasks.",
                    difficulty: "medium"
                },
                {
                    question: "What does Future represent in Java?",
                    options: ["result of asynchronous computation", "result of past computation", "result of current computation", "cancelled computation result", "failed computation result", "pending computation only", "completed computation only"],
                    correct: 0,
                    explanation: "Future represents the result of an async operation, providing methods to check completion and get result.",
                    difficulty: "medium"
                },
                {
                    question: "What is CompletableFuture in Java?",
                    options: ["Future that can be completed and composed", "simple Future implementation", "cancelled Future state", "failed Future state", "pending Future state", "blocking Future type", "synchronous Future type"],
                    correct: 0,
                    explanation: "CompletableFuture supports functional composition and explicit completion of async operations.",
                    difficulty: "hard"
                },
                {
                    question: "How do Callable and Runnable interfaces differ?",
                    options: ["Callable returns result, throws checked exceptions", "Runnable returns result, throws checked exceptions", "both return results always", "neither returns results", "Callable returns void", "Runnable throws checked exceptions", "they are exactly identical"],
                    correct: 0,
                    explanation: "Callable<V> returns a value and can throw checked exceptions; Runnable returns void.",
                    difficulty: "medium"
                }
            ],
            io: [
                {
                    question: "How do byte streams and character streams differ?",
                    options: ["byte streams handle raw bytes, character streams handle text", "character streams handle raw bytes, byte streams handle text", "both handle raw bytes only", "both handle text only", "byte streams are faster always", "character streams are older", "they are exactly identical"],
                    correct: 0,
                    explanation: "Byte streams (InputStream/OutputStream) handle raw bytes; character streams (Reader/Writer) handle Unicode text.",
                    difficulty: "easy"
                },
                {
                    question: "What is BufferedReader primarily used for?",
                    options: ["efficient text reading with buffering", "efficient binary writing", "network socket reading", "database query reading", "console output writing", "file deletion operations", "directory listing operations"],
                    correct: 0,
                    explanation: "BufferedReader provides efficient reading by buffering characters, reducing I/O operations.",
                    difficulty: "easy"
                },
                {
                    question: "What does try-with-resources automatically do?",
                    options: ["closes resources implementing AutoCloseable", "catches all thrown exceptions", "logs all error messages", "retries failed operations", "ignores minor exceptions", "converts exception types", "wraps all exceptions"],
                    correct: 0,
                    explanation: "Try-with-resources automatically closes resources implementing AutoCloseable.",
                    difficulty: "easy"
                },
                {
                    question: "What does NIO stand for in Java?",
                    options: ["New I/O with channels and buffers", "Network I/O operations only", "Numeric I/O operations only", "Native I/O operations only", "Null I/O operations only", "Normal I/O operations only", "Named I/O operations only"],
                    correct: 0,
                    explanation: "NIO provides channels, buffers, and selectors for scalable, non-blocking I/O operations.",
                    difficulty: "medium"
                },
                {
                    question: "What is a Channel in Java NIO?",
                    options: ["bidirectional connection for I/O operations", "unidirectional stream only", "memory buffer only", "file handle only", "network socket only", "database connection only", "thread pool only"],
                    correct: 0,
                    explanation: "Channels are bidirectional, can be non-blocking, and work with Buffers for I/O.",
                    difficulty: "medium"
                },
                {
                    question: "What is a Buffer in Java NIO?",
                    options: ["container with position, limit, capacity", "simple array wrapper", "stream wrapper only", "channel wrapper only", "file wrapper only", "network wrapper only", "memory wrapper only"],
                    correct: 0,
                    explanation: "Buffers are containers with position, limit, and capacity for reading/writing data.",
                    difficulty: "medium"
                },
                {
                    question: "What does Path class represent in NIO.2?",
                    options: ["file system path location", "network path only", "URL location only", "database path only", "memory path only", "thread path only", "process path only"],
                    correct: 0,
                    explanation: "Path represents a file system path and provides methods for path manipulation.",
                    difficulty: "medium"
                },
                {
                    question: "What does Files class provide?",
                    options: ["static methods for file operations", "instance methods for streams", "constructors for paths", "factories for channels", "builders for buffers", "handlers for exceptions", "listeners for events"],
                    correct: 0,
                    explanation: "Files class provides static methods for common file operations like copy, move, delete, read.",
                    difficulty: "medium"
                },
                {
                    question: "What is serialization in Java?",
                    options: ["converting object to byte stream", "converting bytes to object", "compressing file data", "encrypting file data", "transferring network data", "allocating memory space", "synchronizing thread access"],
                    correct: 0,
                    explanation: "Serialization converts an object's state to a byte stream for storage or transmission.",
                    difficulty: "medium"
                },
                {
                    question: "Which interface must a class implement for serialization?",
                    options: ["Serializable", "Externalizable", "Cloneable", "Comparable", "Iterable", "AutoCloseable", "Readable"],
                    correct: 0,
                    explanation: "Classes must implement Serializable (marker interface) to be serialized.",
                    difficulty: "easy"
                }
            ],
            jdbc: [
                {
                    question: "What does JDBC abbreviation stand for?",
                    options: ["Java Database Connectivity", "Java Data Base Connection", "Java DB Connector", "Java Database Controller", "Java Data Bridge Connection", "Java DB Communication", "Java Database Component"],
                    correct: 0,
                    explanation: "JDBC (Java Database Connectivity) is the standard API for database access in Java.",
                    difficulty: "easy"
                },
                {
                    question: "What is a JDBC Driver?",
                    options: ["implementation connecting Java to database", "database server software", "SQL query parser", "connection pool manager", "query optimizer engine", "transaction manager service", "schema manager tool"],
                    correct: 0,
                    explanation: "JDBC drivers implement the JDBC interfaces for specific database systems.",
                    difficulty: "easy"
                },
                {
                    question: "What does DriverManager class do?",
                    options: ["manages drivers and creates connections", "executes SQL queries", "manages transactions", "handles result sets", "creates statements", "manages connection pools", "handles SQL errors"],
                    correct: 0,
                    explanation: "DriverManager manages registered drivers and establishes database connections.",
                    difficulty: "easy"
                },
                {
                    question: "What is a PreparedStatement in JDBC?",
                    options: ["precompiled SQL with parameters", "simple SQL statement", "stored procedure call", "batch SQL statement", "dynamic SQL statement", "cached SQL statement", "pooled SQL statement"],
                    correct: 0,
                    explanation: "PreparedStatement is precompiled, supports parameters, and prevents SQL injection.",
                    difficulty: "medium"
                },
                {
                    question: "What advantage does PreparedStatement have over Statement?",
                    options: ["prevents SQL injection, better performance", "simpler syntax only", "no real advantages", "slower execution speed", "more memory usage", "less security features", "no parameter support"],
                    correct: 0,
                    explanation: "PreparedStatement prevents SQL injection, is precompiled for better performance, and supports parameters.",
                    difficulty: "medium"
                },
                {
                    question: "What does ResultSet represent in JDBC?",
                    options: ["table of data from query", "SQL statement object", "database connection object", "transaction state object", "driver configuration object", "pool management object", "schema definition object"],
                    correct: 0,
                    explanation: "ResultSet represents the result of a query, providing methods to iterate through rows.",
                    difficulty: "easy"
                },
                {
                    question: "What is connection pooling in JDBC?",
                    options: ["reusing connections for better performance", "creating new connections always", "closing connections immediately", "validating connections only", "encrypting connections only", "compressing connections only", "caching queries only"],
                    correct: 0,
                    explanation: "Connection pooling maintains a cache of connections for reuse, reducing connection overhead.",
                    difficulty: "medium"
                },
                {
                    question: "What is a transaction in JDBC?",
                    options: ["atomic unit of work with ACID properties", "single SQL query only", "database connection only", "prepared statement only", "result set only", "driver instance only", "pool instance only"],
                    correct: 0,
                    explanation: "Transactions group operations that must all succeed or all fail (ACID properties).",
                    difficulty: "medium"
                },
                {
                    question: "How do you start a transaction in JDBC?",
                    options: ["connection.setAutoCommit(false)", "connection.beginTransaction()", "connection.startTransaction()", "connection.openTransaction()", "connection.createTransaction()", "connection.initTransaction()", "connection.newTransaction()"],
                    correct: 0,
                    explanation: "Setting autoCommit to false starts manual transaction management.",
                    difficulty: "medium"
                },
                {
                    question: "What is batch processing in JDBC?",
                    options: ["executing multiple statements as group", "executing single statement only", "executing in parallel threads", "executing asynchronously only", "executing with caching only", "executing with pooling only", "executing with streaming only"],
                    correct: 0,
                    explanation: "Batch processing groups multiple SQL statements for efficient execution.",
                    difficulty: "hard"
                }
            ],
            strings: [
                {
                    question: "Are String objects mutable or immutable in Java?",
                    options: ["immutable, cannot be changed", "mutable, can be changed", "depends on content", "depends on JVM version", "only final strings immutable", "only static strings immutable", "only constant strings immutable"],
                    correct: 0,
                    explanation: "String objects are immutable; any modification creates a new String object.",
                    difficulty: "easy"
                },
                {
                    question: "What is the String Pool in Java?",
                    options: ["cache of String literals in heap", "collection of String methods", "String buffer implementation", "String builder implementation", "String array storage", "String list storage", "String set storage"],
                    correct: 0,
                    explanation: "String Pool stores String literals to save memory by reusing identical strings.",
                    difficulty: "medium"
                },
                {
                    question: "How do == and equals() differ for Strings?",
                    options: ["== compares references, equals() compares content", "equals() compares references, == compares content", "both compare references only", "both compare content only", "== is faster always", "equals() is deprecated", "they are exactly identical"],
                    correct: 0,
                    explanation: "== checks if references point to same object; equals() compares actual string content.",
                    difficulty: "easy"
                },
                {
                    question: "What is StringBuilder in Java?",
                    options: ["mutable character sequence, not thread-safe", "immutable character sequence", "thread-safe character sequence", "constant character sequence", "literal character sequence", "pooled character sequence", "cached character sequence"],
                    correct: 0,
                    explanation: "StringBuilder is mutable and faster than StringBuffer but not thread-safe.",
                    difficulty: "easy"
                },
                {
                    question: "How do StringBuilder and StringBuffer differ?",
                    options: ["StringBuffer synchronized, StringBuilder not", "StringBuilder synchronized, StringBuffer not", "both are synchronized", "neither is synchronized", "StringBuilder is slower", "StringBuffer is deprecated", "they are exactly identical"],
                    correct: 0,
                    explanation: "StringBuffer is thread-safe (synchronized); StringBuilder is faster but not thread-safe.",
                    difficulty: "medium"
                },
                {
                    question: "What does String.intern() method do?",
                    options: ["returns canonical representation from pool", "creates new String always", "converts to uppercase", "converts to lowercase", "trims whitespace characters", "reverses String content", "splits String content"],
                    correct: 0,
                    explanation: "intern() returns a String from the pool, or adds it if not present.",
                    difficulty: "hard"
                },
                {
                    question: "How do you compare Strings ignoring case?",
                    options: ["equalsIgnoreCase()", "equals()", "compareTo()", "compareToIgnoreCase()", "matchIgnoreCase()", "sameIgnoreCase()", "checkIgnoreCase()"],
                    correct: 0,
                    explanation: "equalsIgnoreCase() compares string content ignoring uppercase/lowercase differences.",
                    difficulty: "easy"
                },
                {
                    question: "What is the result of \"Hello\".substring(1, 3)?",
                    options: ["\"el\"", "\"ell\"", "\"Hel\"", "\"llo\"", "\"He\"", "\"lo\"", "\"ll\""],
                    correct: 0,
                    explanation: "substring(1, 3) returns characters from index 1 to 2 (exclusive end): \"el\".",
                    difficulty: "medium"
                },
                {
                    question: "What is a text block in Java?",
                    options: ["multi-line string using triple quotes", "single line string only", "character array storage", "byte array storage", "string array storage", "string list storage", "string buffer storage"],
                    correct: 0,
                    explanation: "Text blocks (Java 15+) use \"\"\" for multi-line strings with preserved formatting.",
                    difficulty: "medium"
                },
                {
                    question: "Which method splits String by delimiter?",
                    options: ["split()", "divide()", "separate()", "partition()", "break()", "cut()", "slice()"],
                    correct: 0,
                    explanation: "split() divides a string around matches of a regular expression delimiter.",
                    difficulty: "easy"
                }
            ],
            memory: [
                {
                    question: "What is the Java Heap used for?",
                    options: ["memory area for object allocation", "memory for method storage", "memory for thread storage", "memory for class storage", "memory for static storage", "memory for stack frames", "memory for native code"],
                    correct: 0,
                    explanation: "The heap is the runtime data area where objects are allocated by the JVM.",
                    difficulty: "easy"
                },
                {
                    question: "What is the Stack used for in Java memory?",
                    options: ["method calls and local variables", "object instance storage", "class definition storage", "static variable storage", "heap overflow storage", "native method storage", "permanent generation storage"],
                    correct: 0,
                    explanation: "Each thread has its own stack storing method frames with local variables and partial results.",
                    difficulty: "easy"
                },
                {
                    question: "What is Garbage Collection in Java?",
                    options: ["automatic memory reclamation of unused objects", "manual memory cleanup by programmer", "memory allocation for objects", "memory compression technique", "memory encryption method", "memory caching strategy", "memory pooling mechanism"],
                    correct: 0,
                    explanation: "GC automatically identifies and removes objects no longer referenced by the program.",
                    difficulty: "easy"
                },
                {
                    question: "What is the purpose of finalize() method?",
                    options: ["called by GC before collection (deprecated)", "creates new objects", "destroys objects immediately", "allocates memory space", "frees memory immediately", "compacts memory space", "validates object state"],
                    correct: 0,
                    explanation: "finalize() was called before GC but is deprecated; use try-with-resources or Cleaner instead.",
                    difficulty: "medium"
                },
                {
                    question: "What are the generations in Java heap?",
                    options: ["Young Generation and Old Generation", "only one generation exists", "three equal sized parts", "Stack and Heap parts", "Static and Dynamic parts", "Local and Global parts", "Temporary and Permanent parts"],
                    correct: 0,
                    explanation: "Heap is divided into Young (Eden, Survivor) and Old generations for efficient GC.",
                    difficulty: "medium"
                },
                {
                    question: "What is a memory leak in Java?",
                    options: ["objects retained but no longer needed", "memory corruption error", "stack overflow exception", "heap overflow exception", "garbage collection failure", "memory fragmentation issue", "memory exhaustion error"],
                    correct: 0,
                    explanation: "Memory leaks occur when objects are unintentionally kept referenced, preventing GC.",
                    difficulty: "medium"
                },
                {
                    question: "What is Metaspace in Java?",
                    options: ["memory for class metadata (replaced PermGen)", "memory for object storage", "memory for stack frames", "memory for heap objects", "memory for native code", "memory for thread data", "memory for method code"],
                    correct: 0,
                    explanation: "Metaspace (Java 8+) stores class metadata in native memory, replacing PermGen.",
                    difficulty: "hard"
                },
                {
                    question: "What is a soft reference in Java?",
                    options: ["reference cleared when memory is low", "strong reference type", "weak reference type", "phantom reference type", "final reference type", "static reference type", "local reference type"],
                    correct: 0,
                    explanation: "Soft references are cleared when JVM needs memory, useful for caches.",
                    difficulty: "hard"
                },
                {
                    question: "What is a weak reference in Java?",
                    options: ["reference that doesn't prevent GC collection", "strong reference type", "soft reference type", "phantom reference type", "final reference type", "static reference type", "local reference type"],
                    correct: 0,
                    explanation: "Weak references don't prevent garbage collection of the referenced object.",
                    difficulty: "hard"
                },
                {
                    question: "How can you request garbage collection?",
                    options: ["System.gc() but only a suggestion", "gc.run() method call", "Runtime.collect() method", "Memory.free() method", "Heap.clean() method", "JVM.gc() method", "Object.gc() method"],
                    correct: 0,
                    explanation: "System.gc() suggests GC to JVM, but doesn't guarantee immediate execution.",
                    difficulty: "medium"
                }
            ],
            annotations: [
                {
                    question: "What is an annotation in Java?",
                    options: ["metadata about program elements", "comment type in code", "documentation string", "exception type definition", "interface type definition", "class type definition", "method type definition"],
                    correct: 0,
                    explanation: "Annotations provide metadata that can be processed at compile-time or runtime.",
                    difficulty: "easy"
                },
                {
                    question: "What does @Override annotation indicate?",
                    options: ["method overrides superclass method", "method creates new behavior", "method deletes parent method", "method hides parent method", "method renames parent method", "method copies parent method", "method moves parent method"],
                    correct: 0,
                    explanation: "@Override helps catch errors by ensuring the method actually overrides a parent method.",
                    difficulty: "easy"
                },
                {
                    question: "What does @Deprecated annotation indicate?",
                    options: ["element should no longer be used", "element is newly added", "element is required always", "element is optional always", "element is final always", "element is static always", "element is abstract always"],
                    correct: 0,
                    explanation: "@Deprecated marks elements that are obsolete and may be removed in future versions.",
                    difficulty: "easy"
                },
                {
                    question: "What does @SuppressWarnings annotation do?",
                    options: ["tells compiler to ignore specific warnings", "creates compiler warnings", "logs compiler warnings", "throws compiler warnings", "counts compiler warnings", "displays compiler warnings", "stores compiler warnings"],
                    correct: 0,
                    explanation: "@SuppressWarnings instructs the compiler to suppress specified warning types.",
                    difficulty: "easy"
                },
                {
                    question: "What does @FunctionalInterface annotation indicate?",
                    options: ["interface has exactly one abstract method", "interface creates functional behavior", "interface deletes methods", "interface hides methods", "interface copies methods", "interface moves methods", "interface renames methods"],
                    correct: 0,
                    explanation: "@FunctionalInterface ensures the interface can be used with lambda expressions.",
                    difficulty: "medium"
                },
                {
                    question: "What is a meta-annotation in Java?",
                    options: ["annotation that annotates other annotations", "regular class annotation", "regular method annotation", "regular field annotation", "regular parameter annotation", "regular package annotation", "regular module annotation"],
                    correct: 0,
                    explanation: "Meta-annotations like @Retention, @Target define how other annotations behave.",
                    difficulty: "medium"
                },
                {
                    question: "What does @Retention meta-annotation specify?",
                    options: ["how long annotation is retained", "where annotation can be used", "who can use annotation", "when annotation executes", "why annotation exists", "what annotation does", "which annotation to use"],
                    correct: 0,
                    explanation: "@Retention specifies whether annotation is available at SOURCE, CLASS, or RUNTIME.",
                    difficulty: "medium"
                },
                {
                    question: "What does @Target meta-annotation specify?",
                    options: ["where annotation can be applied", "how long annotation lasts", "who uses annotation", "when annotation runs", "why annotation exists", "what annotation does", "which annotation to use"],
                    correct: 0,
                    explanation: "@Target specifies element types (METHOD, FIELD, CLASS, etc.) where annotation can be used.",
                    difficulty: "medium"
                },
                {
                    question: "How do you create a custom annotation?",
                    options: ["using @interface keyword", "using interface keyword", "using class keyword", "using annotation keyword", "using custom keyword", "using define keyword", "using create keyword"],
                    correct: 0,
                    explanation: "Custom annotations are defined using @interface followed by the annotation name.",
                    difficulty: "medium"
                },
                {
                    question: "What does @Inherited meta-annotation do?",
                    options: ["makes annotation inherited by subclasses", "prevents annotation inheritance", "creates annotation inheritance", "deletes annotation inheritance", "hides annotation inheritance", "copies annotation inheritance", "moves annotation inheritance"],
                    correct: 0,
                    explanation: "@Inherited causes the annotation to be automatically inherited by subclasses.",
                    difficulty: "hard"
                }
            ],
            reflection: [
                {
                    question: "What is Reflection in Java?",
                    options: ["ability to examine and modify runtime behavior", "compile-time code analysis", "static code analysis", "code generation tool", "code optimization technique", "code compression method", "code encryption system"],
                    correct: 0,
                    explanation: "Reflection allows inspection and manipulation of classes, methods, and fields at runtime.",
                    difficulty: "easy"
                },
                {
                    question: "How do you get the Class object of a class?",
                    options: ["ClassName.class or object.getClass()", "new Class(ClassName)", "Class.create(ClassName)", "getClass(ClassName)", "Class.of(ClassName)", "Class.get(ClassName)", "Class.find(ClassName)"],
                    correct: 0,
                    explanation: "Use ClassName.class for compile-time or object.getClass() for runtime Class object.",
                    difficulty: "easy"
                },
                {
                    question: "What is Class.forName() used for?",
                    options: ["load class dynamically by name", "create new class definition", "delete existing class", "rename existing class", "copy existing class", "move existing class", "hide existing class"],
                    correct: 0,
                    explanation: "Class.forName() loads a class dynamically using its fully qualified name.",
                    difficulty: "medium"
                },
                {
                    question: "How do you create an instance using reflection?",
                    options: ["getDeclaredConstructor().newInstance()", "new ReflectedClass()", "class.create()", "class.build()", "class.make()", "class.construct()", "class.instantiate()"],
                    correct: 0,
                    explanation: "Use getDeclaredConstructor().newInstance() to create objects reflectively.",
                    difficulty: "medium"
                },
                {
                    question: "How do you access private fields using reflection?",
                    options: ["field.setAccessible(true)", "field.makePublic()", "field.unlock()", "field.open()", "field.expose()", "field.reveal()", "field.show()"],
                    correct: 0,
                    explanation: "setAccessible(true) bypasses access control checks for private members.",
                    difficulty: "medium"
                },
                {
                    question: "What is Method.invoke() used for?",
                    options: ["call method dynamically at runtime", "define new method", "delete existing method", "rename existing method", "copy existing method", "move existing method", "hide existing method"],
                    correct: 0,
                    explanation: "invoke() calls a method on an object with specified arguments at runtime.",
                    difficulty: "medium"
                },
                {
                    question: "What are disadvantages of using reflection?",
                    options: ["performance overhead and security concerns", "no disadvantages exist", "faster code execution", "better security features", "simpler code structure", "smaller bytecode size", "better type safety"],
                    correct: 0,
                    explanation: "Reflection is slower, bypasses compile-time checks, and can break encapsulation.",
                    difficulty: "medium"
                },
                {
                    question: "How do you get all methods of a class?",
                    options: ["getMethods() or getDeclaredMethods()", "class.methods()", "class.allMethods()", "class.listMethods()", "class.findMethods()", "class.showMethods()", "class.printMethods()"],
                    correct: 0,
                    explanation: "getMethods() returns public methods including inherited; getDeclaredMethods() returns all declared methods.",
                    difficulty: "medium"
                },
                {
                    question: "What is a dynamic proxy in Java?",
                    options: ["runtime-generated class implementing interfaces", "static proxy class", "compile-time proxy", "design pattern only", "abstract class type", "final class type", "inner class type"],
                    correct: 0,
                    explanation: "Dynamic proxies are created at runtime using Proxy.newProxyInstance() to implement interfaces.",
                    difficulty: "hard"
                },
                {
                    question: "What does InvocationHandler interface do?",
                    options: ["handles method calls on dynamic proxy", "creates proxy instances", "deletes proxy instances", "validates proxy instances", "caches proxy instances", "pools proxy instances", "manages proxy instances"],
                    correct: 0,
                    explanation: "InvocationHandler's invoke() method is called for every method invocation on the proxy.",
                    difficulty: "hard"
                }
            ],
            modules: [
                {
                    question: "What is the Java Platform Module System (JPMS)?",
                    options: ["system for modularizing Java applications", "package management system", "class loading system", "method dispatch system", "variable scoping system", "import management system", "export management system"],
                    correct: 0,
                    explanation: "JPMS (Project Jigsaw) provides strong encapsulation and explicit dependencies for Java applications.",
                    difficulty: "easy"
                },
                {
                    question: "What file defines a module in Java?",
                    options: ["module-info.java", "module.java", "Module.java", "module-def.java", "module.xml", "module.json", "module.properties"],
                    correct: 0,
                    explanation: "module-info.java in the module root defines the module's name, exports, and requirements.",
                    difficulty: "easy"
                },
                {
                    question: "Which keyword declares a module in Java?",
                    options: ["module", "package", "import", "export", "require", "class", "interface"],
                    correct: 0,
                    explanation: "The 'module' keyword declares a module in module-info.java.",
                    difficulty: "easy"
                },
                {
                    question: "What does 'requires' directive do in modules?",
                    options: ["declares dependency on another module", "exports packages publicly", "opens packages for reflection", "uses service interfaces", "provides service implementations", "contains package definitions", "imports class definitions"],
                    correct: 0,
                    explanation: "'requires' specifies that this module depends on another module.",
                    difficulty: "medium"
                },
                {
                    question: "What does 'exports' directive do in modules?",
                    options: ["makes package accessible to other modules", "requires other modules", "opens for reflection", "uses service interfaces", "provides implementations", "contains definitions", "imports definitions"],
                    correct: 0,
                    explanation: "'exports' makes a package's public types accessible to other modules.",
                    difficulty: "medium"
                },
                {
                    question: "How do exports and opens directives differ?",
                    options: ["exports for compile-time, opens for reflection", "opens for compile-time, exports for reflection", "both for compile-time only", "both for reflection only", "opens is deprecated now", "exports is deprecated now", "they are exactly identical"],
                    correct: 0,
                    explanation: "'exports' allows compile-time access; 'opens' allows deep reflection at runtime.",
                    difficulty: "hard"
                },
                {
                    question: "What does 'requires transitive' directive do?",
                    options: ["dependency passed to dependent modules", "private module dependency", "optional module dependency", "static module dependency", "weak module dependency", "strong module dependency", "local module dependency"],
                    correct: 0,
                    explanation: "'requires transitive' makes the dependency available to modules depending on this module.",
                    difficulty: "hard"
                },
                {
                    question: "What is an automatic module in Java?",
                    options: ["JAR on module path without module-info", "manually created module", "explicitly named module", "unnamed module type", "system module type", "platform module type", "application module type"],
                    correct: 0,
                    explanation: "Automatic modules are created from JARs without module-info.java placed on the module path.",
                    difficulty: "hard"
                },
                {
                    question: "What is the unnamed module in Java?",
                    options: ["module containing classes from classpath", "explicitly named module", "automatic module type", "system module type", "platform module type", "application module type", "base module type"],
                    correct: 0,
                    explanation: "The unnamed module contains all classes loaded from the classpath.",
                    difficulty: "hard"
                },
                {
                    question: "What does 'uses' directive do in modules?",
                    options: ["declares that module uses a service", "provides service implementation", "exports package publicly", "requires another module", "opens for reflection", "contains definitions", "imports definitions"],
                    correct: 0,
                    explanation: "'uses' declares that the module consumes a service interface (ServiceLoader).",
                    difficulty: "hard"
                }
            ],
            records: [
                {
                    question: "What is a record in Java?",
                    options: ["immutable data carrier class", "mutable data carrier class", "abstract base class", "interface definition", "enum definition", "annotation definition", "module definition"],
                    correct: 0,
                    explanation: "Records are immutable data classes that automatically generate constructors, accessors, equals, hashCode, toString.",
                    difficulty: "easy"
                },
                {
                    question: "How do you declare a record in Java?",
                    options: ["record Name(Type field)", "class Name record", "record class Name", "data class Name", "struct Name", "tuple Name", "case class Name"],
                    correct: 0,
                    explanation: "Records are declared with 'record' keyword followed by name and component list.",
                    difficulty: "easy"
                },
                {
                    question: "Are record fields mutable or immutable?",
                    options: ["immutable, fields are final", "mutable, fields can change", "depends on field type", "depends on access modifier", "only primitives immutable", "only objects immutable", "configurable per field"],
                    correct: 0,
                    explanation: "Record components are implicitly final; records are designed to be immutable.",
                    difficulty: "easy"
                },
                {
                    question: "Can records extend other classes?",
                    options: ["no, implicitly extend Record class", "yes, any class allowed", "only abstract classes", "only other records", "only interfaces", "only Object class", "only final classes"],
                    correct: 0,
                    explanation: "Records implicitly extend java.lang.Record and cannot extend other classes.",
                    difficulty: "medium"
                },
                {
                    question: "Can records implement interfaces?",
                    options: ["yes, any number of interfaces", "no, interfaces not allowed", "only Serializable interface", "only Comparable interface", "only functional interfaces", "only marker interfaces", "only one interface"],
                    correct: 0,
                    explanation: "Records can implement any number of interfaces.",
                    difficulty: "medium"
                },
                {
                    question: "What is a compact constructor in records?",
                    options: ["constructor without parameter list for validation", "default no-arg constructor", "copy constructor type", "private constructor type", "static factory method", "abstract constructor type", "final constructor type"],
                    correct: 0,
                    explanation: "Compact constructors omit the parameter list and are used for validation/normalization.",
                    difficulty: "medium"
                },
                {
                    question: "What is a sealed class in Java?",
                    options: ["class restricting which classes can extend", "final class type", "abstract class type", "open class type", "public class type", "private class type", "protected class type"],
                    correct: 0,
                    explanation: "Sealed classes (Java 17) explicitly list permitted subclasses using 'permits' clause.",
                    difficulty: "medium"
                },
                {
                    question: "Which keyword lists permitted subclasses of sealed class?",
                    options: ["permits", "allows", "extends", "implements", "includes", "contains", "accepts"],
                    correct: 0,
                    explanation: "'permits' clause lists the classes allowed to extend the sealed class.",
                    difficulty: "medium"
                },
                {
                    question: "What must a subclass of sealed class be?",
                    options: ["final, sealed, or non-sealed", "only final always", "only sealed always", "only abstract always", "only public always", "only private always", "any modifier allowed"],
                    correct: 0,
                    explanation: "Subclasses must be final (no further extension), sealed (controlled extension), or non-sealed (open).",
                    difficulty: "hard"
                },
                {
                    question: "Can records be used with pattern matching in switch?",
                    options: ["yes, with record patterns", "no, not supported", "only with instanceof", "only with equals", "only with hashCode", "only with toString", "only with compareTo"],
                    correct: 0,
                    explanation: "Record patterns allow deconstructing records in switch expressions and instanceof.",
                    difficulty: "hard"
                }
            ],
            bestpractices: [
                {
                    question: "What does Single Responsibility Principle state?",
                    options: ["class should have one reason to change", "class should do everything", "class should be final", "class should be abstract", "class should be public", "class should be private", "class should be static"],
                    correct: 0,
                    explanation: "SRP states that a class should have only one responsibility or reason to change.",
                    difficulty: "easy"
                },
                {
                    question: "What does DRY principle stand for?",
                    options: ["Don't Repeat Yourself", "Do Repeat Yourself", "Delete Repeated Yields", "Duplicate Required Yields", "Don't Run Yields", "Do Run Yields", "Delete Run Yields"],
                    correct: 0,
                    explanation: "DRY principle advocates avoiding duplication of code and logic.",
                    difficulty: "easy"
                },
                {
                    question: "Why prefer composition over inheritance?",
                    options: ["more flexible, avoids tight coupling", "inheritance is always better", "composition is slower", "inheritance more flexible", "composition is deprecated", "inheritance is newer", "composition is harder"],
                    correct: 0,
                    explanation: "Composition provides more flexibility and looser coupling than inheritance.",
                    difficulty: "medium"
                },
                {
                    question: "What does Open/Closed Principle state?",
                    options: ["open for extension, closed for modification", "open for modification always", "closed for extension always", "always open for changes", "always closed for changes", "never open for anything", "never closed for anything"],
                    correct: 0,
                    explanation: "OCP states that classes should be open for extension but closed for modification.",
                    difficulty: "medium"
                },
                {
                    question: "Why should fields be declared private?",
                    options: ["encapsulation controls access and modification", "performance improvement only", "memory savings only", "compilation requirement only", "JVM requirement only", "security requirement only", "syntax requirement only"],
                    correct: 0,
                    explanation: "Private fields enforce encapsulation, allowing controlled access through methods.",
                    difficulty: "easy"
                },
                {
                    question: "What does Liskov Substitution Principle state?",
                    options: ["subtypes must be substitutable for base types", "base types substitute subtypes", "no substitution is allowed", "only interfaces substitute", "only abstract classes substitute", "only final classes substitute", "only records substitute"],
                    correct: 0,
                    explanation: "LSP states that objects of a superclass should be replaceable with objects of subclasses.",
                    difficulty: "hard"
                },
                {
                    question: "Why use interfaces for dependencies?",
                    options: ["loose coupling and easier testing", "tight coupling preferred", "faster code execution", "smaller code size", "better security features", "less memory usage", "simpler syntax only"],
                    correct: 0,
                    explanation: "Programming to interfaces allows swapping implementations and easier unit testing.",
                    difficulty: "medium"
                },
                {
                    question: "What does Interface Segregation Principle state?",
                    options: ["clients shouldn't depend on unused methods", "one large interface is better", "interfaces should have many methods", "interfaces should be empty", "interfaces should be final", "interfaces should be abstract", "interfaces should be private"],
                    correct: 0,
                    explanation: "ISP advocates for smaller, specific interfaces rather than large, general ones.",
                    difficulty: "hard"
                },
                {
                    question: "Why prefer immutable objects?",
                    options: ["thread-safe, simpler, no defensive copies", "mutable objects always better", "immutable objects slower", "immutable use more memory", "immutable are deprecated", "immutable are harder", "immutable are newer"],
                    correct: 0,
                    explanation: "Immutable objects are inherently thread-safe and easier to reason about.",
                    difficulty: "medium"
                },
                {
                    question: "What does Dependency Inversion Principle state?",
                    options: ["depend on abstractions, not concretions", "depend on concretions always", "no dependencies allowed", "only concrete dependencies", "only abstract dependencies", "only interface dependencies", "only class dependencies"],
                    correct: 0,
                    explanation: "DIP states that high-level modules should depend on abstractions, not low-level modules.",
                       difficulty: "hard"
                }
            ]
        };

        // Quiz state
        let currentQuestionIndex = 0;
        let score = 0;
        let correctAnswers = 0;
        let wrongAnswers = 0;
        let selectedQuestions = [];
        let categoryScores = {};
        let startTime;
        let totalTime = 0;
        let questionTimer = null;
        let questionTimeLimit = 30;
        let questionTimeRemaining = 0;
        let quizInProgress = false;

        // Visit tracking state
        let visitStats = {
            totalVisits: 0,
            quizzesCompleted: 0,
            bestScore: 0,
            currentStreak: 0,
            lastVisitDate: null,
            awardsEarned: [],
            totalCorrectAnswers: 0,
            perfectQuizzes: 0
        };

        // Award definitions
        const awards = [
            { id: 'first_visit', name: 'First Steps', icon: 'üëã', description: 'Complete your first visit', condition: (stats) => stats.totalVisits >= 1 },
            { id: 'quiz_starter', name: 'Quiz Starter', icon: 'üéØ', description: 'Complete your first quiz', condition: (stats) => stats.quizzesCompleted >= 1 },
            { id: 'dedicated', name: 'Dedicated Learner', icon: 'üìö', description: 'Complete 5 quizzes', condition: (stats) => stats.quizzesCompleted >= 5 },
            { id: 'expert', name: 'Java Expert', icon: 'üèÜ', description: 'Complete 10 quizzes', condition: (stats) => stats.quizzesCompleted >= 10 },
            { id: 'master', name: 'Quiz Master', icon: 'üëë', description: 'Complete 25 quizzes', condition: (stats) => stats.quizzesCompleted >= 25 },
            { id: 'perfect_score', name: 'Perfectionist', icon: 'üíØ', description: 'Score 100% on a quiz', condition: (stats) => stats.bestScore >= 100 },
            { id: 'high_achiever', name: 'High Achiever', icon: '‚≠ê', description: 'Score 90% or higher', condition: (stats) => stats.bestScore >= 90 },
            { id: 'passing_grade', name: 'Passing Grade', icon: '‚úÖ', description: 'Score 70% or higher', condition: (stats) => stats.bestScore >= 70 },
            { id: 'streak_3', name: 'On Fire', icon: 'üî•', description: '3 day streak', condition: (stats) => stats.currentStreak >= 3 },
            { id: 'streak_7', name: 'Week Warrior', icon: '‚ö°', description: '7 day streak', condition: (stats) => stats.currentStreak >= 7 },
            { id: 'streak_30', name: 'Monthly Master', icon: 'üåü', description: '30 day streak', condition: (stats) => stats.currentStreak >= 30 },
            { id: 'century', name: 'Century Club', icon: 'üí™', description: '100 correct answers total', condition: (stats) => stats.totalCorrectAnswers >= 100 },
            { id: 'knowledge_seeker', name: 'Knowledge Seeker', icon: 'üß†', description: '500 correct answers total', condition: (stats) => stats.totalCorrectAnswers >= 500 },
            { id: 'triple_perfect', name: 'Triple Perfect', icon: 'üéñÔ∏è', description: '3 perfect quizzes', condition: (stats) => stats.perfectQuizzes >= 3 }
        ];

        // Load visit stats from localStorage
        function loadVisitStats() {
            const saved = localStorage.getItem('javaQuizVisitStats');
            if (saved) {
                visitStats = JSON.parse(saved);
            }
            
            // Update streak
            updateStreak();
            
            // Increment visit count
            visitStats.totalVisits++;
            saveVisitStats();
            
            // Update display
            updateVisitDisplay();
        }

        // Save visit stats to localStorage
        function saveVisitStats() {
            localStorage.setItem('javaQuizVisitStats', JSON.stringify(visitStats));
        }

        // Update streak based on last visit
        function updateStreak() {
            const today = new Date().toDateString();
            const lastVisit = visitStats.lastVisitDate;
            
            if (!lastVisit) {
                visitStats.currentStreak = 1;
            } else {
                const lastDate = new Date(lastVisit);
                const todayDate = new Date(today);
                const diffTime = todayDate - lastDate;
                const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
                
                if (diffDays === 0) {
                    // Same day, keep streak
                } else if (diffDays === 1) {
                    // Consecutive day, increment streak
                    visitStats.currentStreak++;
                } else {
                    // Streak broken
                    visitStats.currentStreak = 1;
                }
            }
            
            visitStats.lastVisitDate = today;
        }

        // Update visit display
        function updateVisitDisplay() {
            document.getElementById('totalVisits').textContent = visitStats.totalVisits;
            document.getElementById('quizzesCompleted').textContent = visitStats.quizzesCompleted;
            document.getElementById('bestScore').textContent = visitStats.bestScore + '%';
            document.getElementById('currentStreak').textContent = visitStats.currentStreak;
            
            // Update awards display
            updateAwardsDisplay();
            
            // Show streak indicator if active
            const streakIndicator = document.getElementById('streakIndicator');
            if (visitStats.currentStreak >= 2) {
                streakIndicator.style.display = 'block';
                streakIndicator.classList.add('active');
                document.getElementById('streakMessage').textContent = 
                    `üî• ${visitStats.currentStreak} day streak! Keep it going!`;
            } else {
                streakIndicator.style.display = 'none';
            }
        }

        // Update awards display
        function updateAwardsDisplay() {
            const container = document.getElementById('awardsContainer');
            container.innerHTML = '';
            
            awards.forEach(award => {
                const earned = award.condition(visitStats);
                const badge = document.createElement('div');
                badge.className = `award-badge ${earned ? 'earned' : 'locked'}`;
                badge.innerHTML = `
                    <span class="award-icon">${earned ? award.icon : 'üîí'}</span>
                    <span>${award.name}</span>
                `;
                badge.title = award.description;
                container.appendChild(badge);
            });
        }

        // Check for new awards
        function checkNewAwards() {
            const newAwards = [];
            
            awards.forEach(award => {
                if (award.condition(visitStats) && !visitStats.awardsEarned.includes(award.id)) {
                    visitStats.awardsEarned.push(award.id);
                    newAwards.push(award);
                }
            });
            
            return newAwards;
        }

        // Create confetti effect
        function createConfetti() {
            const container = document.getElementById('confettiContainer');
            container.innerHTML = '';
            
            const colors = ['#f89820', '#5382a1', '#ffd700', '#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ff9ff3'];
            const shapes = ['‚ñ†', '‚óè', '‚ñ≤', '‚òÖ', '‚ô¶', '‚ô•'];
            
            for (let i = 0; i < 150; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animationDelay = Math.random() * 3 + 's';
                confetti.style.animationDuration = (Math.random() * 2 + 2) + 's';
                confetti.innerHTML = shapes[Math.floor(Math.random() * shapes.length)];
                confetti.style.fontSize = (Math.random() * 15 + 10) + 'px';
                confetti.style.color = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.animation = `confetti-fall ${Math.random() * 2 + 2}s linear forwards`;
                confetti.style.animationDelay = Math.random() * 2 + 's';
                container.appendChild(confetti);
            }
            
            // Clear confetti after animation
            setTimeout(() => {
                container.innerHTML = '';
            }, 5000);
        }

        // Show congratulations popup
        function showCongratsPopup(score, newAwards) {
            const popup = document.getElementById('congratsPopup');
            const icon = document.getElementById('congratsIcon');
            const title = document.getElementById('congratsTitle');
            const message = document.getElementById('congratsMessage');
            const awardsContainer = document.getElementById('congratsAwards');
            
            // Set content based on score
            if (score === 100) {
                icon.textContent = 'üèÜ';
                title.textContent = 'PERFECT SCORE!';
                message.textContent = 'Incredible! You answered every question correctly! You are a true Java master!';
            } else if (score >= 90) {
                icon.textContent = 'üåü';
                title.textContent = 'Outstanding!';
                message.textContent = `Amazing performance! You scored ${score}%! Your Java knowledge is exceptional!`;
            } else if (score >= 80) {
                icon.textContent = 'üéâ';
                title.textContent = 'Excellent Work!';
                message.textContent = `Great job! You scored ${score}%! You have a strong understanding of Java!`;
            } else if (score >= 70) {
                icon.textContent = 'üëè';
                title.textContent = 'Good Job!';
                message.textContent = `Well done! You scored ${score}%! Keep practicing to improve even more!`;
            } else {
                // Don't show popup for scores below 70%
                return false;
            }
            
            // Show new awards
            awardsContainer.innerHTML = '';
            if (newAwards.length > 0) {
                const awardsTitle = document.createElement('p');
                awardsTitle.style.marginBottom = '10px';
                awardsTitle.style.fontWeight = 'bold';
                awardsTitle.textContent = 'üéñÔ∏è New Awards Earned:';
                awardsContainer.appendChild(awardsTitle);
                
                newAwards.forEach(award => {
                    const badge = document.createElement('div');
                    badge.className = 'award-badge earned';
                    badge.innerHTML = `
                        <span class="award-icon">${award.icon}</span>
                        <span>${award.name}</span>
                    `;
                    awardsContainer.appendChild(badge);
                });
            }
            
            popup.classList.add('show');
            createConfetti();
            
            return true;
        }

        // Close congratulations popup
        function closeCongratsPopup() {
            document.getElementById('congratsPopup').classList.remove('show');
        }

        // Save settings to localStorage
        function saveSettings() {
            const settings = {
                category: document.getElementById('categorySelect').value,
                difficulty: document.getElementById('difficultySelect').value,
                questionCount: document.getElementById('questionCount').value,
                timer: document.getElementById('timerSelect').value
            };
            localStorage.setItem('javaQuizSettings', JSON.stringify(settings));
        }

        // Load settings from localStorage
        function loadSettings() {
            const saved = localStorage.getItem('javaQuizSettings');
            if (saved) {
                const settings = JSON.parse(saved);
                document.getElementById('categorySelect').value = settings.category || 'all';
                document.getElementById('difficultySelect').value = settings.difficulty || 'all';
                document.getElementById('questionCount').value = settings.questionCount || '10';
                document.getElementById('timerSelect').value = settings.timer || '30';
            }
        }

        // Save quiz state for resume
        function saveQuizState() {
            if (!quizInProgress) return;
            
            const state = {
                currentQuestionIndex,
                score,
                correctAnswers,
                wrongAnswers,
                selectedQuestions,
                categoryScores,
                startTime: startTime.getTime(),
                totalTime,
                questionTimeLimit,
                timestamp: Date.now()
            };
            localStorage.setItem('javaQuizState', JSON.stringify(state));
        }

        // Load quiz state for resume
        function loadQuizState() {
            const saved = localStorage.getItem('javaQuizState');
            if (saved) {
                const state = JSON.parse(saved);
                // Check if state is less than 24 hours old
                if (Date.now() - state.timestamp < 24 * 60 * 60 * 1000) {
                    return state;
                }
            }
            return null;
        }

        // Clear saved quiz state
        function clearQuizState() {
            localStorage.removeItem('javaQuizState');
        }

        // Check for resumable quiz
        function checkResumableQuiz() {
            const state = loadQuizState();
            if (state && state.currentQuestionIndex < state.selectedQuestions.length) {
                const resumeBanner = document.getElementById('resumeBanner');
                const resumeInfo = document.getElementById('resumeInfo');
                resumeBanner.style.display = 'flex';
                resumeInfo.textContent = `Question ${state.currentQuestionIndex + 1} of ${state.selectedQuestions.length} ‚Ä¢ ${state.correctAnswers} correct so far`;
            }
        }

        // Resume quiz
        function resumeQuiz() {
            const state = loadQuizState();
            if (state) {
                currentQuestionIndex = state.currentQuestionIndex;
                score = state.score;
                correctAnswers = state.correctAnswers;
                wrongAnswers = state.wrongAnswers;
                selectedQuestions = state.selectedQuestions;
                categoryScores = state.categoryScores;
                startTime = new Date(state.startTime);
                totalTime = state.totalTime;
                questionTimeLimit = state.questionTimeLimit;
                quizInProgress = true;
                
                document.getElementById('startScreen').style.display = 'none';
                document.getElementById('progressContainer').style.display = 'block';
                document.getElementById('totalQuestions').textContent = selectedQuestions.length;
                
                renderQuestions();
                showQuestion(currentQuestionIndex);
                updateProgress();
                startQuestionTimer();
            }
        }

        // Dismiss resume banner
        function dismissResume() {
            clearQuizState();
            document.getElementById('resumeBanner').style.display = 'none';
        }

        // Shuffle array
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Get questions based on settings
        function getQuestions() {
            const category = document.getElementById('categorySelect').value;
            const difficulty = document.getElementById('difficultySelect').value;
            const count = parseInt(document.getElementById('questionCount').value);
            
            let questions = [];
            
            if (category === 'all') {
                // Get questions from all categories
                for (const cat in allQuestions) {
                    allQuestions[cat].forEach(q => {
                        questions.push({...q, category: cat});
                    });
                }
            } else {
                // Get questions from selected category
                allQuestions[category].forEach(q => {
                    questions.push({...q, category: category});
                });
            }
            
            // Filter by difficulty
            if (difficulty !== 'all') {
                questions = questions.filter(q => q.difficulty === difficulty);
            }
            
            // Shuffle and select
            questions = shuffleArray(questions);
            return questions.slice(0, Math.min(count, questions.length));
        }

        // Get category display name
        function getCategoryName(category) {
            const names = {
                basics: 'Java Basics',
                oop: 'OOP Concepts',
                classes: 'Classes & Objects',
                inheritance: 'Inheritance',
                interfaces: 'Interfaces & Abstract',
                exceptions: 'Exception Handling',
                collections: 'Collections Framework',
                generics: 'Generics',
                streams: 'Streams API',
                lambdas: 'Lambda Expressions',
                multithreading: 'Multithreading',
                io: 'I/O & NIO',
                jdbc: 'JDBC',
                strings: 'Strings',
                memory: 'Memory Management',
                annotations: 'Annotations',
                reflection: 'Reflection',
                modules: 'Modules (JPMS)',
                records: 'Records & Sealed',
                bestpractices: 'Best Practices'
            };
            return names[category] || category;
        }

        // Render questions
        function renderQuestions() {
            const container = document.getElementById('questionsContainer');
            container.innerHTML = '';
            
            selectedQuestions.forEach((q, index) => {
                // Select 5 random options including the correct one
                const correctOption = q.options[q.correct];
                let otherOptions = q.options.filter((_, i) => i !== q.correct);
                otherOptions = shuffleArray(otherOptions).slice(0, 4);
                
                // Combine and shuffle
                let displayOptions = [correctOption, ...otherOptions];
                displayOptions = shuffleArray(displayOptions);
                
                // Find new correct index
                const newCorrectIndex = displayOptions.indexOf(correctOption);
                
                // Store the display options and correct index
                q.displayOptions = displayOptions;
                q.displayCorrect = newCorrectIndex;
                
                const questionCard = document.createElement('div');
                questionCard.className = 'question-card';
                questionCard.id = `question-${index}`;
                
                const letters = ['A', 'B', 'C', 'D', 'E'];
                
                questionCard.innerHTML = `
                    <div class="question-meta">
                        <span class="question-number">Question ${index + 1}</span>
                        <span class="question-category">${getCategoryName(q.category)}</span>
                        <span class="question-difficulty ${q.difficulty}">${q.difficulty.charAt(0).toUpperCase() + q.difficulty.slice(1)}</span>
                    </div>
                    <div class="time-up-message" id="timeUp-${index}">
                        <span class="time-icon">‚è∞</span>
                        <div class="time-text">
                            <strong>Time's Up!</strong>
                            <span>The correct answer is highlighted below.</span>
                        </div>
                    </div>
                    <div class="question-text">${q.question}</div>
                    <div class="options">
                        ${displayOptions.map((opt, i) => `
                            <div class="option" onclick="selectOption(${index}, ${i})" id="option-${index}-${i}">
                                <span class="option-letter">${letters[i]}</span>
                                <span class="option-text">${opt}</span>
                            </div>
                        `).join('')}
                    </div>
                    <div class="explanation" id="explanation-${index}">
                        <h4>üí° Explanation</h4>
                        <p>${q.explanation}</p>
                    </div>
                    <div class="btn-container">
                        <button class="btn btn-secondary" onclick="quitQuiz()" id="quitBtn-${index}">üö™ Quit</button>
                        <button class="btn btn-primary" onclick="nextQuestion()" id="nextBtn-${index}" disabled>
                            ${index === selectedQuestions.length - 1 ? 'üìä See Results' : 'Next Question ‚Üí'}
                        </button>
                    </div>
                `;
                
                container.appendChild(questionCard);
            });
        }

        // Start quiz
        function startQuiz() {
            selectedQuestions = getQuestions();
            
            if (selectedQuestions.length === 0) {
                alert('No questions available for the selected criteria. Please try different settings.');
                return;
            }
            
            currentQuestionIndex = 0;
            score = 0;
            correctAnswers = 0;
            wrongAnswers = 0;
            categoryScores = {};
            startTime = new Date();
            totalTime = 0;
            questionTimeLimit = parseInt(document.getElementById('timerSelect').value);
            quizInProgress = true;
            
            // Initialize category scores
            selectedQuestions.forEach(q => {
                if (!categoryScores[q.category]) {
                    categoryScores[q.category] = { correct: 0, total: 0 };
                }
                categoryScores[q.category].total++;
            });
            
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('progressContainer').style.display = 'block';
            document.getElementById('totalQuestions').textContent = selectedQuestions.length;
            
            renderQuestions();
            showQuestion(0);
            updateProgress();
            startQuestionTimer();
            saveQuizState();
        }

        // Show question
        function showQuestion(index) {
            document.querySelectorAll('.question-card').forEach(card => {
                card.classList.remove('active');
            });
            document.getElementById(`question-${index}`).classList.add('active');
            
            // Reset timer for new question
            if (questionTimeLimit > 0) {
                questionTimeRemaining = questionTimeLimit;
                updateTimerDisplay();
            }
        }

        // Start question timer
        function startQuestionTimer() {
            if (questionTimeLimit === 0) {
                document.getElementById('timer').textContent = '‚àû';
                return;
            }
            
            questionTimeRemaining = questionTimeLimit;
            updateTimerDisplay();
            
            if (questionTimer) {
                clearInterval(questionTimer);
            }
            
            questionTimer = setInterval(() => {
                questionTimeRemaining--;
                updateTimerDisplay();
                
                if (questionTimeRemaining <= 0) {
                    clearInterval(questionTimer);
                    handleTimeUp();
                }
            }, 1000);
        }

        // Update timer display
        function updateTimerDisplay() {
            const timerElement = document.getElementById('timer');
            const minutes = Math.floor(questionTimeRemaining / 60);
            const seconds = questionTimeRemaining % 60;
            timerElement.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Add warning classes
            timerElement.classList.remove('warning', 'danger');
            if (questionTimeRemaining <= 5) {
                timerElement.classList.add('danger');
            } else if (questionTimeRemaining <= 10) {
                timerElement.classList.add('warning');
            }
        }

        // Handle time up
        function handleTimeUp() {
            const question = selectedQuestions[currentQuestionIndex];
            const correctIndex = question.displayCorrect;
            
            // Show time up message
            document.getElementById(`timeUp-${currentQuestionIndex}`).classList.add('show');
            
            // Mark as wrong
            wrongAnswers++;
            
            // Disable all options
            for (let i = 0; i < 5; i++) {
                const option = document.getElementById(`option-${currentQuestionIndex}-${i}`);
                option.classList.add('disabled');
                if (i === correctIndex) {
                    option.classList.add('show-correct');
                }
            }
            
            // Show explanation
            document.getElementById(`explanation-${currentQuestionIndex}`).classList.add('show');
            
            // Enable next button
            document.getElementById(`nextBtn-${currentQuestionIndex}`).disabled = false;
            
            updateProgress();
            saveQuizState();
        }

        // Select option
        function selectOption(questionIndex, optionIndex) {
            if (questionTimer) {
                clearInterval(questionTimer);
            }
            
            const question = selectedQuestions[questionIndex];
            const correctIndex = question.displayCorrect;
            const isCorrect = optionIndex === correctIndex;
            
            // Update scores
            if (isCorrect) {
                correctAnswers++;
                categoryScores[question.category].correct++;
            } else {
                wrongAnswers++;
            }
            
            // Disable all options and show result
            for (let i = 0; i < 5; i++) {
                const option = document.getElementById(`option-${questionIndex}-${i}`);
                option.classList.add('disabled');
                
                if (i === optionIndex) {
                    option.classList.add(isCorrect ? 'correct' : 'incorrect');
                }
                if (i === correctIndex && !isCorrect) {
                    option.classList.add('show-correct');
                }
            }
            
            // Show explanation
            document.getElementById(`explanation-${questionIndex}`).classList.add('show');
            
            // Enable next button
            document.getElementById(`nextBtn-${questionIndex}`).disabled = false;
            
            updateProgress();
            saveQuizState();
        }

        // Update progress
        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / selectedQuestions.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            document.getElementById('currentQuestion').textContent = currentQuestionIndex + 1;
            document.getElementById('correctCount').textContent = correctAnswers;
            document.getElementById('wrongCount').textContent = wrongAnswers;
            
            const currentScore = selectedQuestions.length > 0 
                ? Math.round((correctAnswers / (correctAnswers + wrongAnswers || 1)) * 100) 
                : 0;
            document.getElementById('currentScore').textContent = currentScore;
        }

        // Next question
        function nextQuestion() {
            if (currentQuestionIndex < selectedQuestions.length - 1) {
                currentQuestionIndex++;
                showQuestion(currentQuestionIndex);
                updateProgress();
                startQuestionTimer();
                saveQuizState();
            } else {
                showResults();
            }
        }

        // Quit quiz
        function quitQuiz() {
            if (confirm('Are you sure you want to quit? Your progress will be saved.')) {
                if (questionTimer) {
                    clearInterval(questionTimer);
                }
                saveQuizState();
                backToMenu();
            }
        }

        // Show results
        function showResults() {
            if (questionTimer) {
                clearInterval(questionTimer);
            }
            
            quizInProgress = false;
            clearQuizState();
            
            const endTime = new Date();
            totalTime = Math.floor((endTime - startTime) / 1000);
            
            const finalScore = Math.round((correctAnswers / selectedQuestions.length) * 100);
            
            // Update visit stats
            visitStats.quizzesCompleted++;
            visitStats.totalCorrectAnswers += correctAnswers;
            if (finalScore > visitStats.bestScore) {
                visitStats.bestScore = finalScore;
            }
            if (finalScore === 100) {
                visitStats.perfectQuizzes++;
            }
            
            // Check for new awards
            const newAwards = checkNewAwards();
            saveVisitStats();
            
            document.getElementById('questionsContainer').innerHTML = '';
            document.getElementById('progressContainer').style.display = 'none';
            document.getElementById('resultsCard').classList.add('active');
            
            document.getElementById('finalScore').textContent = `${finalScore}%`;
            document.getElementById('finalCorrect').textContent = correctAnswers;
            document.getElementById('finalWrong').textContent = wrongAnswers;
            
            const minutes = Math.floor(totalTime / 60);
            const seconds = totalTime % 60;
            document.getElementById('finalTime').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Set result message
            let message, details;
            if (finalScore >= 90) {
                message = "üèÜ Outstanding Performance!";
                details = "You're a Java expert! Excellent knowledge demonstrated.";
            } else if (finalScore >= 70) {
                message = "üåü Great Job!";
                details = "You have a solid understanding of Java concepts.";
            } else if (finalScore >= 50) {
                message = "üìö Good Effort!";
                details = "Keep studying to improve your Java knowledge.";
            } else {
                message = "üí™ Keep Learning!";
                details = "Review the concepts and try again. Practice makes perfect!";
            }
            
            document.getElementById('resultsMessage').textContent = message;
            document.getElementById('resultsDetails').textContent = details;
            
            // Show category scores
            const categoryScoresContainer = document.getElementById('categoryScores');
            categoryScoresContainer.innerHTML = '<h4 style="margin-bottom: 15px;">Performance by Category</h4>';
            
            for (const category in categoryScores) {
                const catScore = categoryScores[category];
                const percentage = Math.round((catScore.correct / catScore.total) * 100);
                
                categoryScoresContainer.innerHTML += `
                    <div class="category-score-item">
                        <span class="category-name">${getCategoryName(category)}</span>
                        <span class="category-score-value">${catScore.correct}/${catScore.total}</span>
                        <div class="category-score-bar">
                            <div class="category-score-fill" style="width: ${percentage}%"></div>
                        </div>
                    </div>
                `;
            }
            
            // Show congratulations popup for good scores
            if (finalScore >= 70) {
                setTimeout(() => {
                    showCongratsPopup(finalScore, newAwards);
                }, 500);
            }
        }

        // Restart quiz
        function restartQuiz() {
            document.getElementById('resultsCard').classList.remove('active');
            startQuiz();
        }

        // Back to menu
        function backToMenu() {
            if (questionTimer) {
                clearInterval(questionTimer);
            }
            
            document.getElementById('resultsCard').classList.remove('active');
            document.getElementById('questionsContainer').innerHTML = '';
            document.getElementById('progressContainer').style.display = 'none';
            document.getElementById('startScreen').style.display = 'block';
            
            // Update visit display
            updateVisitDisplay();
            
            // Check for resumable quiz
            checkResumableQuiz();
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadSettings();
            loadVisitStats();
            checkResumableQuiz();
        });

        // Save state before leaving
        window.addEventListener('beforeunload', () => {
            if (quizInProgress) {
                saveQuizState();
            }
        });
    </script>
</body>
</html> 
